import{j as e}from"./ui-vendor-8V_oKEeO.js";import{r as s}from"./react-vendor-CNUWQFbP.js";import{T as a,a as t,b as n,c as i}from"./academics-yUGFON3d.js";import{n as l,o as d,p as c,w as r,r as o,at as u,au as x,q as p,t as j,g as h,h as m,i as g,j as y,k as v,B as f,I as N,b,T as C,a4 as A,u as S,av as T,V as E,aw as O,ac as w,aa as R,al as F}from"./institute-BF3Og4ow.js";import{D as I,S as L,G as Z,a as M,b as P,c as G,d as V,e as _,f as D,g as B,A as k,h as H}from"./staffing-BsaaBxTJ.js";import{S as K,D as U,T as z,e as q,f as Y,g as J,h as Q,i as W}from"./verification-Bi_X-LS6.js";import{d as X}from"./generateStaff-DUCsFEgl.js";import"./chart-vendor-DjRgKakx.js";import"./form-vendor-B1G7pw6y.js";import"./query-vendor-B0hUVdFE.js";const $=[{id:"as-001",instituteId:"inst-001",subject:"English",postType:"Teaching",designation:I.PROFESSOR,category:L.GENERAL,gender:Z.MALE,disability:M.NONE,approvedCount:2,filledCount:2,vacantCount:0,createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"as-002",instituteId:"inst-001",subject:"English",postType:"Teaching",designation:I.ASSOCIATE_PROFESSOR,category:L.OBC,gender:Z.FEMALE,disability:M.NONE,approvedCount:3,filledCount:2,vacantCount:1,createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"as-003",instituteId:"inst-001",subject:"English",postType:"Teaching",designation:I.ASSISTANT_PROFESSOR,category:L.SC,gender:Z.MALE,disability:M.NONE,approvedCount:2,filledCount:1,vacantCount:1,createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"as-004",instituteId:"inst-001",subject:"English",postType:"Teaching",designation:I.ASSISTANT_PROFESSOR,category:L.GENERAL,gender:Z.FEMALE,disability:M.VISUAL,approvedCount:1,filledCount:1,vacantCount:0,createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"as-005",instituteId:"inst-001",subject:"Mathematics",postType:"Teaching",designation:I.PROFESSOR,category:L.GENERAL,gender:Z.MALE,disability:M.NONE,approvedCount:3,filledCount:3,vacantCount:0,createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"as-006",instituteId:"inst-001",subject:"Mathematics",postType:"Teaching",designation:I.ASSOCIATE_PROFESSOR,category:L.OBC,gender:Z.FEMALE,disability:M.NONE,approvedCount:2,filledCount:1,vacantCount:1,createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"as-007",instituteId:"inst-001",subject:"Mathematics",postType:"Teaching",designation:I.ASSISTANT_PROFESSOR,category:L.ST,gender:Z.MALE,disability:M.NONE,approvedCount:1,filledCount:0,vacantCount:1,createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"as-008",instituteId:"inst-001",subject:"Mathematics",postType:"Teaching",designation:I.ASSISTANT_PROFESSOR,category:L.GENERAL,gender:Z.FEMALE,disability:M.NONE,approvedCount:4,filledCount:3,vacantCount:1,createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"as-009",instituteId:"inst-001",subject:"Physics",postType:"Teaching",designation:I.PROFESSOR,category:L.GENERAL,gender:Z.MALE,disability:M.NONE,approvedCount:2,filledCount:2,vacantCount:0,createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"as-010",instituteId:"inst-001",subject:"Physics",postType:"Teaching",designation:I.ASSOCIATE_PROFESSOR,category:L.OBC,gender:Z.MALE,disability:M.NONE,approvedCount:3,filledCount:2,vacantCount:1,createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"as-011",instituteId:"inst-001",subject:"Physics",postType:"Teaching",designation:I.ASSISTANT_PROFESSOR,category:L.SC,gender:Z.FEMALE,disability:M.NONE,approvedCount:2,filledCount:1,vacantCount:1,createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"as-012",instituteId:"inst-001",subject:"Physics",postType:"Teaching",designation:I.ASSISTANT_PROFESSOR,category:L.GENERAL,gender:Z.FEMALE,disability:M.HEARING,approvedCount:1,filledCount:0,vacantCount:1,createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"as-013",instituteId:"inst-001",subject:"Chemistry",postType:"Teaching",designation:I.PROFESSOR,category:L.GENERAL,gender:Z.FEMALE,disability:M.NONE,approvedCount:2,filledCount:2,vacantCount:0,createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"as-014",instituteId:"inst-001",subject:"Chemistry",postType:"Teaching",designation:I.ASSOCIATE_PROFESSOR,category:L.OBC,gender:Z.MALE,disability:M.NONE,approvedCount:2,filledCount:2,vacantCount:0,createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"as-015",instituteId:"inst-001",subject:"Chemistry",postType:"Teaching",designation:I.ASSISTANT_PROFESSOR,category:L.GENERAL,gender:Z.FEMALE,disability:M.NONE,approvedCount:3,filledCount:2,vacantCount:1,createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"as-016",instituteId:"inst-001",subject:"History",postType:"Teaching",designation:I.PROFESSOR,category:L.GENERAL,gender:Z.MALE,disability:M.NONE,approvedCount:1,filledCount:1,vacantCount:0,createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"as-017",instituteId:"inst-001",subject:"History",postType:"Teaching",designation:I.ASSOCIATE_PROFESSOR,category:L.OBC,gender:Z.FEMALE,disability:M.NONE,approvedCount:2,filledCount:1,vacantCount:1,createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"as-018",instituteId:"inst-001",subject:"History",postType:"Teaching",designation:I.ASSISTANT_PROFESSOR,category:L.SC,gender:Z.MALE,disability:M.NONE,approvedCount:2,filledCount:1,vacantCount:1,createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"as-019",instituteId:"inst-001",subject:"Computer Science",postType:"Teaching",designation:I.PROFESSOR,category:L.GENERAL,gender:Z.MALE,disability:M.NONE,approvedCount:3,filledCount:2,vacantCount:1,createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"as-020",instituteId:"inst-001",subject:"Computer Science",postType:"Teaching",designation:I.ASSOCIATE_PROFESSOR,category:L.OBC,gender:Z.FEMALE,disability:M.NONE,approvedCount:4,filledCount:3,vacantCount:1,createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"as-021",instituteId:"inst-001",subject:"Computer Science",postType:"Teaching",designation:I.ASSISTANT_PROFESSOR,category:L.GENERAL,gender:Z.MALE,disability:M.NONE,approvedCount:5,filledCount:3,vacantCount:2,createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"as-022",instituteId:"inst-001",subject:"Computer Science",postType:"Teaching",designation:I.ASSISTANT_PROFESSOR,category:L.ST,gender:Z.FEMALE,disability:M.NONE,approvedCount:1,filledCount:0,vacantCount:1,createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"as-023",instituteId:"inst-001",subject:"Commerce",postType:"Teaching",designation:I.PROFESSOR,category:L.GENERAL,gender:Z.FEMALE,disability:M.NONE,approvedCount:2,filledCount:2,vacantCount:0,createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"as-024",instituteId:"inst-001",subject:"Commerce",postType:"Teaching",designation:I.ASSOCIATE_PROFESSOR,category:L.OBC,gender:Z.MALE,disability:M.NONE,approvedCount:3,filledCount:2,vacantCount:1,createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"as-025",instituteId:"inst-001",subject:"Commerce",postType:"Teaching",designation:I.ASSISTANT_PROFESSOR,category:L.GENERAL,gender:Z.FEMALE,disability:M.NONE,approvedCount:4,filledCount:3,vacantCount:1,createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"}],ee=()=>{const[E,O]=s.useState($),[w,R]=s.useState({}),[F,k]=s.useState(""),[H,z]=s.useState(!1),[q,Y]=s.useState(null),[J,Q]=s.useState({id:"",approvedCount:0,filledCount:0}),{success:W,error:X}=T(),ee=s.useMemo(()=>(e=>{const s=new Set(e.map(e=>e.subject));return Array.from(s).sort()})(E),[E]),se=s.useMemo(()=>(e=>{const s={totalApproved:0,totalFilled:0,totalVacant:0,bySubject:{},byCategory:{},byGender:{}};return Object.values(L).forEach(e=>{s.byCategory[e]={approved:0,filled:0,vacant:0}}),Object.values(Z).forEach(e=>{s.byGender[e]={approved:0,filled:0,vacant:0}}),e.forEach(e=>{s.totalApproved+=e.approvedCount,s.totalFilled+=e.filledCount,s.totalVacant+=e.vacantCount,s.bySubject[e.subject]||(s.bySubject[e.subject]={approved:0,filled:0,vacant:0}),s.bySubject[e.subject].approved+=e.approvedCount,s.bySubject[e.subject].filled+=e.filledCount,s.bySubject[e.subject].vacant+=e.vacantCount,s.byCategory[e.category].approved+=e.approvedCount,s.byCategory[e.category].filled+=e.filledCount,s.byCategory[e.category].vacant+=e.vacantCount,s.byGender[e.gender].approved+=e.approvedCount,s.byGender[e.gender].filled+=e.filledCount,s.byGender[e.gender].vacant+=e.vacantCount}),s})(E),[E]),ae=s.useMemo(()=>E.filter(e=>{if(w.subject&&e.subject!==w.subject)return!1;if(w.designation&&e.designation!==w.designation)return!1;if(w.category&&e.category!==w.category)return!1;if(w.gender&&e.gender!==w.gender)return!1;if(w.disability&&e.disability!==w.disability)return!1;if(w.showVacantOnly&&0===e.vacantCount)return!1;if(F){const s=F.toLowerCase();return e.subject.toLowerCase().includes(s)||e.postType.toLowerCase().includes(s)||e.designation.toLowerCase().includes(s)}return!0}),[E,w,F]),te=[{accessorKey:"subject",header:"Subject",cell:({row:s})=>e.jsx("div",{className:"font-medium",children:s.original.subject})},{accessorKey:"designation",header:"Designation",cell:({row:s})=>e.jsx("div",{className:"capitalize",children:s.original.designation.replace(/_/g," ")})},{accessorKey:"category",header:"Category",cell:({row:s})=>e.jsx(b,{variant:"outline",className:"uppercase",children:s.original.category})},{accessorKey:"gender",header:"Gender",cell:({row:s})=>e.jsx("div",{className:"capitalize",children:s.original.gender})},{accessorKey:"disability",header:"Disability",cell:({row:s})=>e.jsx("div",{className:"capitalize text-sm",children:s.original.disability===M.NONE?"-":s.original.disability})},{accessorKey:"approvedCount",header:"Approved",cell:({row:s})=>e.jsx("div",{className:"text-center font-semibold",children:s.original.approvedCount})},{accessorKey:"filledCount",header:"Filled",cell:({row:s})=>e.jsx("div",{className:"text-center text-green-600 font-semibold",children:s.original.filledCount})},{accessorKey:"vacantCount",header:"Vacant",cell:({row:s})=>e.jsx("div",{className:"text-center",children:e.jsx(b,{variant:s.original.vacantCount>0?"destructive":"secondary",children:s.original.vacantCount})})},{accessorKey:"fillRate",header:"Fill Rate",cell:({row:s})=>{const a=s.original.approvedCount>0?s.original.filledCount/s.original.approvedCount*100:0;return e.jsxs("div",{className:"flex items-center gap-1",children:[100===a?e.jsx(C,{className:"h-4 w-4 text-green-600"}):a<50?e.jsx(A,{className:"h-4 w-4 text-red-600"}):null,e.jsxs("span",{className:100===a?"text-green-600":a<50?"text-red-600":"",children:[a.toFixed(0),"%"]})]})}},{id:"actions",header:"Actions",cell:({row:s})=>e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>{return e=s.original,Y(e),Q({id:e.id,approvedCount:e.approvedCount,filledCount:e.filledCount}),void z(!0);var e},children:e.jsx(S,{className:"h-4 w-4"})})}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Approved Seats Management"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Manage approved staff positions with subject-wise, category-wise, and gender-wise allocation"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(l,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium",children:"Total Approved"}),e.jsx(r,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(o,{children:[e.jsx("div",{className:"text-2xl font-bold",children:se.totalApproved}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Sanctioned positions"})]})]}),e.jsxs(l,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium",children:"Total Filled"}),e.jsx(u,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(o,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:se.totalFilled}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[(se.totalFilled/se.totalApproved*100).toFixed(1),"% fill rate"]})]})]}),e.jsxs(l,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium",children:"Total Vacant"}),e.jsx(x,{className:"h-4 w-4 text-red-600"})]}),e.jsxs(o,{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:se.totalVacant}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Positions to be filled"})]})]})]}),e.jsxs(l,{children:[e.jsxs(d,{children:[e.jsx(c,{children:"Filters"}),e.jsx(p,{children:"Filter approved seats by various criteria"})]}),e.jsxs(o,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Subject"}),e.jsxs(h,{value:w.subject||"all",onValueChange:e=>R({...w,subject:"all"===e?void 0:e}),children:[e.jsx(m,{children:e.jsx(g,{placeholder:"All subjects"})}),e.jsxs(y,{children:[e.jsx(v,{value:"all",children:"All subjects"}),ee.map(s=>e.jsx(v,{value:s,children:s},s))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Designation"}),e.jsxs(h,{value:w.designation||"all",onValueChange:e=>R({...w,designation:"all"===e?void 0:e}),children:[e.jsx(m,{children:e.jsx(g,{placeholder:"All designations"})}),e.jsxs(y,{children:[e.jsx(v,{value:"all",children:"All designations"}),Object.values(I).map(s=>e.jsx(v,{value:s,children:s.replace(/_/g," ")},s))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Category"}),e.jsxs(h,{value:w.category||"all",onValueChange:e=>R({...w,category:"all"===e?void 0:e}),children:[e.jsx(m,{children:e.jsx(g,{placeholder:"All categories"})}),e.jsxs(y,{children:[e.jsx(v,{value:"all",children:"All categories"}),Object.values(L).map(s=>e.jsx(v,{value:s,children:s.toUpperCase()},s))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Gender"}),e.jsxs(h,{value:w.gender||"all",onValueChange:e=>R({...w,gender:"all"===e?void 0:e}),children:[e.jsx(m,{children:e.jsx(g,{placeholder:"All genders"})}),e.jsxs(y,{children:[e.jsx(v,{value:"all",children:"All genders"}),Object.values(Z).map(s=>e.jsx(v,{value:s,children:s},s))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Disability"}),e.jsxs(h,{value:w.disability||"all",onValueChange:e=>R({...w,disability:"all"===e?void 0:e}),children:[e.jsx(m,{children:e.jsx(g,{placeholder:"All types"})}),e.jsxs(y,{children:[e.jsx(v,{value:"all",children:"All types"}),Object.values(M).map(s=>e.jsx(v,{value:s,children:s},s))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Show Vacant Only"}),e.jsxs(h,{value:w.showVacantOnly?"yes":"no",onValueChange:e=>R({...w,showVacantOnly:"yes"===e}),children:[e.jsx(m,{children:e.jsx(g,{})}),e.jsxs(y,{children:[e.jsx(v,{value:"no",children:"All positions"}),e.jsx(v,{value:"yes",children:"Vacant only"})]})]})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(K,{value:F,onChange:k,placeholder:"Search by subject, post type, or designation..."})}),e.jsx("div",{className:"mt-4 flex gap-2",children:e.jsx(f,{variant:"outline",onClick:()=>{R({}),k("")},children:"Clear Filters"})})]})]}),e.jsxs(a,{defaultValue:"all",className:"space-y-4",children:[e.jsxs(t,{children:[e.jsx(n,{value:"all",children:"All Seats"}),e.jsx(n,{value:"subject",children:"By Subject"}),e.jsx(n,{value:"category",children:"By Category"}),e.jsx(n,{value:"gender",children:"By Gender"})]}),e.jsx(i,{value:"all",className:"space-y-4",children:e.jsxs(l,{children:[e.jsxs(d,{children:[e.jsxs(c,{children:["Approved Seats (",ae.length,")"]}),e.jsx(p,{children:"Complete list of approved staff positions"})]}),e.jsx(o,{children:e.jsx(U,{columns:te,data:ae})})]})}),e.jsx(i,{value:"subject",className:"space-y-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(se.bySubject).map(([s,a])=>e.jsxs(l,{children:[e.jsx(d,{children:e.jsx(c,{className:"text-lg",children:s})}),e.jsx(o,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Approved:"}),e.jsx("span",{className:"font-semibold",children:a.approved})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Filled:"}),e.jsx("span",{className:"font-semibold text-green-600",children:a.filled})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Vacant:"}),e.jsx("span",{className:"font-semibold text-red-600",children:a.vacant})]}),e.jsx("div",{className:"pt-2 border-t",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Fill Rate:"}),e.jsxs("span",{className:"font-bold",children:[(a.filled/a.approved*100).toFixed(1),"%"]})]})})]})})]},s))})}),e.jsx(i,{value:"category",className:"space-y-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Object.entries(se.byCategory).map(([s,a])=>e.jsxs(l,{children:[e.jsx(d,{children:e.jsx(c,{className:"text-lg uppercase",children:s})}),e.jsx(o,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Approved:"}),e.jsx("span",{className:"font-semibold",children:a.approved})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Filled:"}),e.jsx("span",{className:"font-semibold text-green-600",children:a.filled})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Vacant:"}),e.jsx("span",{className:"font-semibold text-red-600",children:a.vacant})]})]})})]},s))})}),e.jsx(i,{value:"gender",className:"space-y-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Object.entries(se.byGender).map(([s,a])=>e.jsxs(l,{children:[e.jsx(d,{children:e.jsx(c,{className:"text-lg capitalize",children:s})}),e.jsx(o,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Approved:"}),e.jsx("span",{className:"font-semibold",children:a.approved})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Filled:"}),e.jsx("span",{className:"font-semibold text-green-600",children:a.filled})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Vacant:"}),e.jsx("span",{className:"font-semibold text-red-600",children:a.vacant})]})]})})]},s))})})]}),e.jsx(P,{open:H,onOpenChange:z,children:e.jsxs(G,{children:[e.jsxs(V,{children:[e.jsx(_,{children:"Edit Approved Seats"}),e.jsxs(D,{children:["Update approved and filled counts for ",null==q?void 0:q.subject," - ",null==q?void 0:q.designation]})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"approvedCount",children:"Approved Count"}),e.jsx(N,{id:"approvedCount",type:"number",min:"0",value:J.approvedCount,onChange:e=>Q({...J,approvedCount:parseInt(e.target.value)||0})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"filledCount",children:"Filled Count"}),e.jsx(N,{id:"filledCount",type:"number",min:"0",max:J.approvedCount,value:J.filledCount,onChange:e=>Q({...J,filledCount:parseInt(e.target.value)||0})})]}),e.jsx("div",{className:"p-4 bg-muted rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:"Vacant Count:"}),e.jsx("span",{className:"text-lg font-bold",children:J.approvedCount-J.filledCount})]})})]}),e.jsxs(B,{children:[e.jsx(f,{variant:"outline",onClick:()=>z(!1),children:"Cancel"}),e.jsx(f,{onClick:()=>{if(!q)return;if(J.approvedCount<0||J.filledCount<0)return void X("Counts cannot be negative");if(J.filledCount>J.approvedCount)return void X("Filled count cannot exceed approved count");const e=E.map(e=>e.id===J.id?{...e,approvedCount:J.approvedCount,filledCount:J.filledCount,vacantCount:J.approvedCount-J.filledCount,updatedAt:(new Date).toISOString()}:e);O(e),z(!1),Y(null),W("Approved seats updated successfully")},children:"Update"})]})]})})]})},se=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),ae=({staff:a,hourlyRate:t=500,hoursTaken:n=0})=>{const i=a.salary,r=s.useMemo(()=>a.appointmentType===k.HOURLY&&n>0?{rate:t,hours:n,total:t*n}:null,[a.appointmentType,t,n]),u=s.useMemo(()=>(null==i?void 0:i.allowances.reduce((e,s)=>e+s.amount,0))||0,[null==i?void 0:i.allowances]),x=s.useMemo(()=>(null==i?void 0:i.deductions.reduce((e,s)=>e+s.amount,0))||0,[null==i?void 0:i.deductions]),j=s.useMemo(()=>r?r.total:((null==i?void 0:i.basicPay)||0)+u,[null==i?void 0:i.basicPay,u,r]),h=s.useMemo(()=>j-x,[j,x]);return i||r?e.jsxs("div",{className:"space-y-6",children:[e.jsx(l,{children:e.jsx(d,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(c,{className:"text-2xl",children:a.name}),e.jsxs(p,{className:"mt-1",children:[a.employeeId," • ",a.designation.replace(/_/g," ")]})]}),e.jsx(b,{variant:a.appointmentType===k.HOURLY?"secondary":"default",className:"text-sm",children:a.appointmentType})]})})}),r&&e.jsxs(l,{children:[e.jsxs(d,{children:[e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-5 w-5"}),"Hourly-Basis Payment Calculation"]}),e.jsx(p,{children:"Payment based on hours taken"})]}),e.jsx(o,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Hourly Rate"}),e.jsx("p",{className:"text-2xl font-bold",children:se(r.rate)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Hours Taken"}),e.jsx("p",{className:"text-2xl font-bold",children:r.hours})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Due"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:se(r.total)})]})]}),e.jsx("div",{className:"p-3 bg-muted rounded-lg",children:e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Calculation:"})," ",r.hours," hours × ",se(r.rate),"/hour = ",se(r.total)]})})]})})]}),i&&!r&&e.jsxs(e.Fragment,{children:[e.jsxs(l,{children:[e.jsxs(d,{children:[e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-5 w-5"}),"Basic Pay"]}),e.jsx(p,{children:"Base salary as per pay scale"})]}),e.jsx(o,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-baseline justify-between",children:[e.jsx("span",{className:"text-3xl font-bold",children:se(i.basicPay)}),e.jsxs("div",{className:"text-right",children:[i.payScale&&e.jsx("p",{className:"text-sm text-muted-foreground",children:i.payScale}),i.gradePayLevel&&e.jsx("p",{className:"text-sm text-muted-foreground",children:i.gradePayLevel})]})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Effective from: ",new Date(i.effectiveFrom).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"})]})]})})]}),e.jsxs(l,{children:[e.jsxs(d,{children:[e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-5 w-5 text-green-600"}),"Allowances"]}),e.jsx(p,{children:"Additional benefits and allowances"})]}),e.jsx(o,{children:e.jsxs(z,{children:[e.jsx(q,{children:e.jsxs(Y,{children:[e.jsx(J,{children:"Type"}),e.jsx(J,{children:"Name"}),e.jsx(J,{children:"Taxable"}),e.jsx(J,{className:"text-right",children:"Amount"})]})}),e.jsxs(Q,{children:[i.allowances.map(s=>e.jsxs(Y,{children:[e.jsx(W,{className:"font-medium",children:s.type}),e.jsx(W,{children:s.name}),e.jsx(W,{children:e.jsx(b,{variant:s.isTaxable?"secondary":"outline",children:s.isTaxable?"Taxable":"Non-taxable"})}),e.jsx(W,{className:"text-right font-medium text-green-600",children:se(s.amount)})]},s.id)),e.jsxs(Y,{className:"bg-muted/50",children:[e.jsx(W,{colSpan:3,className:"font-bold",children:"Total Allowances"}),e.jsx(W,{className:"text-right font-bold text-green-600",children:se(u)})]})]})]})})]}),e.jsxs(l,{children:[e.jsxs(d,{children:[e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-5 w-5 text-red-600"}),"Deductions"]}),e.jsx(p,{children:"Statutory and other deductions"})]}),e.jsx(o,{children:e.jsxs(z,{children:[e.jsx(q,{children:e.jsxs(Y,{children:[e.jsx(J,{children:"Type"}),e.jsx(J,{children:"Name"}),e.jsx(J,{className:"text-right",children:"Amount"})]})}),e.jsxs(Q,{children:[i.deductions.map(s=>e.jsxs(Y,{children:[e.jsx(W,{className:"font-medium",children:s.type}),e.jsx(W,{children:s.name}),e.jsx(W,{className:"text-right font-medium text-red-600",children:se(s.amount)})]},s.id)),e.jsxs(Y,{className:"bg-muted/50",children:[e.jsx(W,{colSpan:2,className:"font-bold",children:"Total Deductions"}),e.jsx(W,{className:"text-right font-bold text-red-600",children:se(x)})]})]})]})})]})]}),e.jsxs(l,{className:"border-2",children:[e.jsxs(d,{children:[e.jsx(c,{children:"Salary Summary"}),e.jsx(p,{children:"Total compensation breakdown"})]}),e.jsx(o,{children:e.jsxs("div",{className:"space-y-3",children:[!r&&i&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Basic Pay"}),e.jsx("span",{className:"font-medium",children:se(i.basicPay)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Total Allowances"}),e.jsxs("span",{className:"font-medium text-green-600",children:["+ ",se(u)]})]}),e.jsx(w,{})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-semibold",children:"Gross Salary"}),e.jsx("span",{className:"font-bold text-lg",children:se(j)})]}),!r&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Total Deductions"}),e.jsxs("span",{className:"font-medium text-red-600",children:["- ",se(x)]})]}),e.jsx(w,{}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-primary/10 rounded-lg",children:[e.jsx("span",{className:"font-bold text-lg",children:"Net Salary"}),e.jsx("span",{className:"font-bold text-2xl text-primary",children:se(h)})]})]})]})})]})]}):e.jsxs(l,{children:[e.jsxs(d,{children:[e.jsx(c,{children:"Salary Details"}),e.jsx(p,{children:"No salary information available"})]}),e.jsx(o,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Salary details have not been configured for this staff member."})})]})},te=()=>{const[x,j]=s.useState(null),[h,m]=s.useState("approved-seats");return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Staffing Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage approved seats, staff records, and salary information"})]}),e.jsxs(a,{value:h,onValueChange:m,className:"space-y-4",children:[e.jsxs(t,{className:"grid w-full grid-cols-3",children:[e.jsxs(n,{value:"approved-seats",children:[e.jsx(u,{className:"mr-2 h-4 w-4"}),"Approved Seats"]}),e.jsxs(n,{value:"staff",children:[e.jsx(r,{className:"mr-2 h-4 w-4"}),"Staff List"]}),e.jsxs(n,{value:"salary",children:[e.jsx(R,{className:"mr-2 h-4 w-4"}),"Salary Details"]})]}),e.jsx(i,{value:"approved-seats",className:"space-y-4",children:e.jsx(ee,{})}),e.jsx(i,{value:"staff",className:"space-y-4",children:e.jsx(H,{staff:X,onEdit:e=>{j(e),m("salary")}})}),e.jsx(i,{value:"salary",className:"space-y-4",children:x?e.jsxs(e.Fragment,{children:[e.jsxs(f,{variant:"outline",onClick:()=>{j(null),m("staff")},className:"mb-4",children:[e.jsx(F,{className:"mr-2 h-4 w-4"}),"Back to Staff List"]}),e.jsx(ae,{staff:x,hourlyRate:500,hoursTaken:"hourly"===x.appointmentType?120:0})]}):e.jsxs(l,{children:[e.jsxs(d,{children:[e.jsx(c,{children:"Salary Details"}),e.jsx(p,{children:"Select a staff member to view salary details"})]}),e.jsxs(o,{children:[e.jsx("p",{className:"text-muted-foreground",children:"Please select a staff member from the Staff List tab to view their salary details."}),e.jsx(f,{onClick:()=>m("staff"),className:"mt-4",children:"Go to Staff List"})]})]})})]})]})};export{te as StaffingModule,te as default};
