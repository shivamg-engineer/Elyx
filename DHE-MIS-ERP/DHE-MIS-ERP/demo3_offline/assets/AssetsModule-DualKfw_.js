import{j as e}from"./ui-vendor-8V_oKEeO.js";import{r as s}from"./react-vendor-CNUWQFbP.js";import{T as a,a as t,b as i,c as l}from"./academics-yUGFON3d.js";import{B as r,v as n,n as c,o as d,p as o,r as m,q as u,t as x,g as h,h as p,i as j,j as N,k as g,b as v,as as f,ar as y,aa as A,E as S,u as b,ah as T,al as D,I as C,az as E,z as L,a1 as I,aG as w,a4 as R,aI as M,aJ as O,Y as $}from"./institute-BF3Og4ow.js";import{S as V,D as _}from"./verification-Bi_X-LS6.js";import{b as k,c as F,d as P,e as G,f as U,g as B}from"./staffing-BsaaBxTJ.js";import{c as z,s as H,d as K,n as Z,u as q}from"./form-vendor-B1G7pw6y.js";import{T as X}from"./index-BTNXxIF4.js";import{R as Y,P as W,e as Q,f as J,T as ee,B as se,C as ae,X as te,Y as ie,a as le,d as re}from"./chart-vendor-DjRgKakx.js";import{d as ne}from"./generateStaff-DUCsFEgl.js";import"./query-vendor-B0hUVdFE.js";import"./i18n-vendor-DhCRt-fY.js";var ce=(e=>(e.FURNITURE="furniture",e.EQUIPMENT="equipment",e.COMPUTER="computer",e.VEHICLE="vehicle",e.LABORATORY="laboratory",e.LIBRARY="library",e.SPORTS="sports",e.BUILDING="building",e.OTHER="other",e))(ce||{}),de=(e=>(e.AVAILABLE="available",e.IN_USE="in_use",e.UNDER_MAINTENANCE="under_maintenance",e.DAMAGED="damaged",e.DISPOSED="disposed",e.LOST="lost",e))(de||{}),oe=(e=>(e.EXCELLENT="excellent",e.GOOD="good",e.FAIR="fair",e.POOR="poor",e))(oe||{}),me=(e=>(e.STRAIGHT_LINE="straight_line",e.DECLINING_BALANCE="declining_balance",e.NO_DEPRECIATION="no_depreciation",e))(me||{});const ue=({assets:a,onEdit:t,onAdd:i})=>{const[l,T]=s.useState({}),[D,C]=s.useState(""),[E,L]=s.useState(null),[I,w]=s.useState(!1),R=s.useMemo(()=>[...new Set(a.map(e=>e.location))].sort(),[a]),M=s.useMemo(()=>[...new Set(a.map(e=>e.department).filter(e=>Boolean(e)))].sort(),[a]),O=s.useMemo(()=>a.filter(e=>{if(l.assetType&&e.assetType!==l.assetType)return!1;if(l.status&&e.status!==l.status)return!1;if(l.condition&&e.condition!==l.condition)return!1;if(l.location&&e.location!==l.location)return!1;if(l.department&&e.department!==l.department)return!1;if(D){const s=D.toLowerCase();return e.name.toLowerCase().includes(s)||e.assetCode.toLowerCase().includes(s)||e.category.toLowerCase().includes(s)||e.serialNumber&&e.serialNumber.toLowerCase().includes(s)}return!0}),[a,l,D]),$=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(e),B=e=>new Date(e).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"}),z=e=>{switch(e){case de.AVAILABLE:return"default";case de.IN_USE:return"secondary";case de.UNDER_MAINTENANCE:return"outline";case de.DAMAGED:return"destructive";case de.DISPOSED:return"outline";case de.LOST:return"destructive";default:return"default"}},H=e=>{switch(e){case oe.EXCELLENT:return"default";case oe.GOOD:return"secondary";case oe.FAIR:return"outline";case oe.POOR:return"destructive";default:return"default"}},K=[{accessorKey:"assetCode",header:"Asset Code",cell:({row:s})=>e.jsx("div",{className:"font-medium",children:s.original.assetCode})},{accessorKey:"name",header:"Name",cell:({row:s})=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.original.name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:s.original.category})]})},{accessorKey:"assetType",header:"Type",cell:({row:s})=>e.jsx(v,{variant:"outline",className:"capitalize",children:s.original.assetType.replace(/_/g," ")})},{accessorKey:"purchaseDate",header:"Purchase Date",cell:({row:s})=>e.jsx("div",{className:"text-sm",children:B(s.original.purchaseDate)})},{accessorKey:"currentValue",header:"Current Value",cell:({row:s})=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:$(s.original.currentValue)}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Cost: ",$(s.original.purchaseCost)]})]})},{accessorKey:"status",header:"Status",cell:({row:s})=>e.jsx(v,{variant:z(s.original.status),className:"capitalize",children:s.original.status.replace(/_/g," ")})},{accessorKey:"condition",header:"Condition",cell:({row:s})=>e.jsx(v,{variant:H(s.original.condition),className:"capitalize",children:s.original.condition})},{accessorKey:"location",header:"Location",cell:({row:s})=>e.jsx("div",{className:"text-sm",children:s.original.location})},{id:"actions",header:"Actions",cell:({row:s})=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(r,{variant:"ghost",size:"sm",onClick:()=>{L(s.original),w(!0)},children:e.jsx(S,{className:"h-4 w-4"})}),t&&e.jsx(r,{variant:"ghost",size:"sm",onClick:()=>t(s.original),children:e.jsx(b,{className:"h-4 w-4"})})]})}],Z=O.reduce((e,s)=>e+s.currentValue,0),q=O.reduce((e,s)=>e+s.accumulatedDepreciation,0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Asset Management"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Track and manage institutional assets"})]}),i&&e.jsxs(r,{onClick:i,children:[e.jsx(n,{className:"h-4 w-4 mr-2"}),"Add Asset"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(c,{children:[e.jsx(d,{className:"pb-3",children:e.jsx(o,{className:"text-sm font-medium",children:"Total Assets"})}),e.jsxs(m,{children:[e.jsx("div",{className:"text-2xl font-bold",children:O.length}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Tracked assets"})]})]}),e.jsxs(c,{children:[e.jsx(d,{className:"pb-3",children:e.jsx(o,{className:"text-sm font-medium",children:"Current Value"})}),e.jsxs(m,{children:[e.jsx("div",{className:"text-2xl font-bold",children:$(Z)}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Total asset value"})]})]}),e.jsxs(c,{children:[e.jsx(d,{className:"pb-3",children:e.jsx(o,{className:"text-sm font-medium",children:"Depreciation"})}),e.jsxs(m,{children:[e.jsx("div",{className:"text-2xl font-bold",children:$(q)}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Accumulated depreciation"})]})]})]}),e.jsxs(c,{children:[e.jsxs(d,{children:[e.jsx(o,{children:"Filters"}),e.jsx(u,{children:"Filter assets by various criteria"})]}),e.jsxs(m,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Asset Type"}),e.jsxs(h,{value:l.assetType||"all",onValueChange:e=>T({...l,assetType:"all"===e?void 0:e}),children:[e.jsx(p,{children:e.jsx(j,{placeholder:"All"})}),e.jsxs(N,{children:[e.jsx(g,{value:"all",children:"All"}),Object.values(ce).map(s=>e.jsx(g,{value:s,className:"capitalize",children:s.replace(/_/g," ")},s))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Status"}),e.jsxs(h,{value:l.status||"all",onValueChange:e=>T({...l,status:"all"===e?void 0:e}),children:[e.jsx(p,{children:e.jsx(j,{placeholder:"All"})}),e.jsxs(N,{children:[e.jsx(g,{value:"all",children:"All"}),Object.values(de).map(s=>e.jsx(g,{value:s,className:"capitalize",children:s.replace(/_/g," ")},s))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Condition"}),e.jsxs(h,{value:l.condition||"all",onValueChange:e=>T({...l,condition:"all"===e?void 0:e}),children:[e.jsx(p,{children:e.jsx(j,{placeholder:"All"})}),e.jsxs(N,{children:[e.jsx(g,{value:"all",children:"All"}),Object.values(oe).map(s=>e.jsx(g,{value:s,className:"capitalize",children:s},s))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Location"}),e.jsxs(h,{value:l.location||"all",onValueChange:e=>T({...l,location:"all"===e?void 0:e}),children:[e.jsx(p,{children:e.jsx(j,{placeholder:"All"})}),e.jsxs(N,{children:[e.jsx(g,{value:"all",children:"All"}),R.map(s=>e.jsx(g,{value:s,children:s},s))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Department"}),e.jsxs(h,{value:l.department||"all",onValueChange:e=>T({...l,department:"all"===e?void 0:e}),children:[e.jsx(p,{children:e.jsx(j,{placeholder:"All"})}),e.jsxs(N,{children:[e.jsx(g,{value:"all",children:"All"}),M.map(s=>e.jsx(g,{value:s,children:s},s))]})]})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(V,{value:D,onChange:C,placeholder:"Search by name, code, category, or serial number..."})}),e.jsx("div",{className:"mt-4",children:e.jsx(r,{variant:"outline",onClick:()=>{T({}),C("")},children:"Clear Filters"})})]})]}),e.jsxs(c,{children:[e.jsxs(d,{children:[e.jsxs(o,{children:["Assets (",O.length,")"]}),e.jsx(u,{children:"Complete list of institutional assets"})]}),e.jsx(m,{children:e.jsx(_,{columns:K,data:O})})]}),e.jsx(k,{open:I,onOpenChange:w,children:e.jsxs(F,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(P,{children:[e.jsx(G,{children:"Asset Details"}),e.jsxs(U,{children:[null==E?void 0:E.assetCode," - ",null==E?void 0:E.name]})]}),E&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{children:"Asset Code"}),e.jsx("p",{className:"text-sm mt-1 font-medium",children:E.assetCode})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Asset Type"}),e.jsx("p",{className:"text-sm mt-1 capitalize",children:E.assetType.replace(/_/g," ")})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Category"}),e.jsx("p",{className:"text-sm mt-1",children:E.category})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Status"}),e.jsx(v,{variant:z(E.status),className:"capitalize mt-1",children:E.status.replace(/_/g," ")})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Condition"}),e.jsx(v,{variant:H(E.condition),className:"capitalize mt-1",children:E.condition})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Location"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(f,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:E.location})]})]})]}),E.description&&e.jsxs("div",{children:[e.jsx(x,{children:"Description"}),e.jsx("p",{className:"text-sm mt-1 text-muted-foreground",children:E.description})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[E.manufacturer&&e.jsxs("div",{children:[e.jsx(x,{children:"Manufacturer"}),e.jsx("p",{className:"text-sm mt-1",children:E.manufacturer})]}),E.model&&e.jsxs("div",{children:[e.jsx(x,{children:"Model"}),e.jsx("p",{className:"text-sm mt-1",children:E.model})]}),E.serialNumber&&e.jsxs("div",{children:[e.jsx(x,{children:"Serial Number"}),e.jsx("p",{className:"text-sm mt-1 font-mono",children:E.serialNumber})]}),E.department&&e.jsxs("div",{children:[e.jsx(x,{children:"Department"}),e.jsx("p",{className:"text-sm mt-1",children:E.department})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Purchase Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{children:"Purchase Date"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(y,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:B(E.purchaseDate)})]})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Purchase Cost"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(A,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:$(E.purchaseCost)})]})]}),E.supplier&&e.jsxs("div",{children:[e.jsx(x,{children:"Supplier"}),e.jsx("p",{className:"text-sm mt-1",children:E.supplier})]}),E.invoiceNumber&&e.jsxs("div",{children:[e.jsx(x,{children:"Invoice Number"}),e.jsx("p",{className:"text-sm mt-1 font-mono",children:E.invoiceNumber})]}),E.warrantyExpiryDate&&e.jsxs("div",{children:[e.jsx(x,{children:"Warranty Expiry"}),e.jsx("p",{className:"text-sm mt-1",children:B(E.warrantyExpiryDate)})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Depreciation Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{children:"Depreciation Method"}),e.jsx("p",{className:"text-sm mt-1 capitalize",children:E.depreciationMethod.replace(/_/g," ")})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Depreciation Rate"}),e.jsxs("p",{className:"text-sm mt-1",children:[E.depreciationRate,"%"]})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Useful Life"}),e.jsxs("p",{className:"text-sm mt-1",children:[E.usefulLife," years"]})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Current Value"}),e.jsx("p",{className:"text-sm mt-1 font-medium",children:$(E.currentValue)})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Accumulated Depreciation"}),e.jsx("p",{className:"text-sm mt-1 text-destructive",children:$(E.accumulatedDepreciation)})]})]})]}),E.allocatedTo&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Allocation Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{children:"Allocated To"}),e.jsx("p",{className:"text-sm mt-1",children:E.allocatedToName})]}),E.allocationDate&&e.jsxs("div",{children:[e.jsx(x,{children:"Allocation Date"}),e.jsx("p",{className:"text-sm mt-1",children:B(E.allocationDate)})]})]})]}),(E.lastMaintenanceDate||E.nextMaintenanceDate)&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Maintenance Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[E.lastMaintenanceDate&&e.jsxs("div",{children:[e.jsx(x,{children:"Last Maintenance"}),e.jsx("p",{className:"text-sm mt-1",children:B(E.lastMaintenanceDate)})]}),E.nextMaintenanceDate&&e.jsxs("div",{children:[e.jsx(x,{children:"Next Maintenance"}),e.jsx("p",{className:"text-sm mt-1",children:B(E.nextMaintenanceDate)})]})]})]}),E.remarks&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx(x,{children:"Remarks"}),e.jsx("p",{className:"text-sm mt-1 text-muted-foreground",children:E.remarks})]})]})]})})]})},xe=z({name:H().min(1,"Asset name is required"),description:H().optional(),assetType:K(ce),category:H().min(1,"Category is required"),manufacturer:H().optional(),model:H().optional(),serialNumber:H().optional(),purchaseDate:H().min(1,"Purchase date is required"),purchaseCost:Z().min(0,"Purchase cost must be positive"),supplier:H().optional(),invoiceNumber:H().optional(),warrantyExpiryDate:H().optional(),status:K(de),condition:K(oe),location:H().min(1,"Location is required"),department:H().optional(),depreciationMethod:K(me),depreciationRate:Z().min(0).max(100,"Rate must be between 0 and 100"),usefulLife:Z().min(1,"Useful life must be at least 1 year"),remarks:H().optional()}),he=({asset:s,onSubmit:a,onCancel:t})=>{const{register:i,handleSubmit:l,watch:n,setValue:v,formState:{errors:f,isSubmitting:y}}=q({resolver:T(xe),defaultValues:s?{name:s.name,description:s.description,assetType:s.assetType,category:s.category,manufacturer:s.manufacturer,model:s.model,serialNumber:s.serialNumber,purchaseDate:s.purchaseDate,purchaseCost:s.purchaseCost,supplier:s.supplier,invoiceNumber:s.invoiceNumber,warrantyExpiryDate:s.warrantyExpiryDate,status:s.status,condition:s.condition,location:s.location,department:s.department,depreciationMethod:s.depreciationMethod,depreciationRate:s.depreciationRate,usefulLife:s.usefulLife,remarks:s.remarks}:{assetType:ce.EQUIPMENT,status:de.AVAILABLE,condition:oe.EXCELLENT,depreciationMethod:me.STRAIGHT_LINE,depreciationRate:10,usefulLife:10,purchaseCost:0}}),A=n("assetType"),S=n("depreciationMethod");return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(r,{variant:"ghost",size:"sm",onClick:t,children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Back"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:s?"Edit Asset":"Add New Asset"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:s?"Update asset information":"Enter details for the new asset"})]})]}),e.jsxs("form",{onSubmit:l(a),className:"space-y-6",children:[e.jsxs(c,{children:[e.jsxs(d,{children:[e.jsx(o,{children:"Basic Information"}),e.jsx(u,{children:"Enter the basic details of the asset"})]}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"name",children:"Asset Name *"}),e.jsx(C,{id:"name",...i("name"),placeholder:"e.g., Desktop Computer"}),f.name&&e.jsx("p",{className:"text-sm text-destructive",children:f.name.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"assetType",children:"Asset Type *"}),e.jsxs(h,{value:A,onValueChange:e=>v("assetType",e),children:[e.jsx(p,{children:e.jsx(j,{})}),e.jsx(N,{children:Object.values(ce).map(s=>e.jsx(g,{value:s,className:"capitalize",children:s.replace(/_/g," ")},s))})]}),f.assetType&&e.jsx("p",{className:"text-sm text-destructive",children:f.assetType.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"category",children:"Category *"}),e.jsx(C,{id:"category",...i("category"),placeholder:"e.g., Desktop, Laptop"}),f.category&&e.jsx("p",{className:"text-sm text-destructive",children:f.category.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"manufacturer",children:"Manufacturer"}),e.jsx(C,{id:"manufacturer",...i("manufacturer"),placeholder:"e.g., Dell, HP"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"model",children:"Model"}),e.jsx(C,{id:"model",...i("model"),placeholder:"e.g., OptiPlex 3000"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"serialNumber",children:"Serial Number"}),e.jsx(C,{id:"serialNumber",...i("serialNumber"),placeholder:"e.g., SN-12345"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"description",children:"Description"}),e.jsx(X,{id:"description",...i("description"),placeholder:"Enter a detailed description of the asset",rows:3})]})]})]}),e.jsxs(c,{children:[e.jsxs(d,{children:[e.jsx(o,{children:"Purchase Information"}),e.jsx(u,{children:"Enter purchase and supplier details"})]}),e.jsx(m,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"purchaseDate",children:"Purchase Date *"}),e.jsx(C,{id:"purchaseDate",type:"date",...i("purchaseDate")}),f.purchaseDate&&e.jsx("p",{className:"text-sm text-destructive",children:f.purchaseDate.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"purchaseCost",children:"Purchase Cost (â‚¹) *"}),e.jsx(C,{id:"purchaseCost",type:"number",step:"0.01",...i("purchaseCost",{valueAsNumber:!0}),placeholder:"0.00"}),f.purchaseCost&&e.jsx("p",{className:"text-sm text-destructive",children:f.purchaseCost.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"supplier",children:"Supplier"}),e.jsx(C,{id:"supplier",...i("supplier"),placeholder:"e.g., Tech Solutions Ltd"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"invoiceNumber",children:"Invoice Number"}),e.jsx(C,{id:"invoiceNumber",...i("invoiceNumber"),placeholder:"e.g., INV-2024-001"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"warrantyExpiryDate",children:"Warranty Expiry Date"}),e.jsx(C,{id:"warrantyExpiryDate",type:"date",...i("warrantyExpiryDate")})]})]})})]}),e.jsxs(c,{children:[e.jsxs(d,{children:[e.jsx(o,{children:"Status & Location"}),e.jsx(u,{children:"Current status and location of the asset"})]}),e.jsx(m,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"status",children:"Status *"}),e.jsxs(h,{value:n("status"),onValueChange:e=>v("status",e),children:[e.jsx(p,{children:e.jsx(j,{})}),e.jsx(N,{children:Object.values(de).map(s=>e.jsx(g,{value:s,className:"capitalize",children:s.replace(/_/g," ")},s))})]}),f.status&&e.jsx("p",{className:"text-sm text-destructive",children:f.status.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"condition",children:"Condition *"}),e.jsxs(h,{value:n("condition"),onValueChange:e=>v("condition",e),children:[e.jsx(p,{children:e.jsx(j,{})}),e.jsx(N,{children:Object.values(oe).map(s=>e.jsx(g,{value:s,className:"capitalize",children:s},s))})]}),f.condition&&e.jsx("p",{className:"text-sm text-destructive",children:f.condition.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"location",children:"Location *"}),e.jsx(C,{id:"location",...i("location"),placeholder:"e.g., Computer Lab 1"}),f.location&&e.jsx("p",{className:"text-sm text-destructive",children:f.location.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"department",children:"Department"}),e.jsx(C,{id:"department",...i("department"),placeholder:"e.g., Computer Science"})]})]})})]}),e.jsxs(c,{children:[e.jsxs(d,{children:[e.jsx(o,{children:"Depreciation Settings"}),e.jsx(u,{children:"Configure depreciation calculation for the asset"})]}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"depreciationMethod",children:"Depreciation Method *"}),e.jsxs(h,{value:S,onValueChange:e=>v("depreciationMethod",e),children:[e.jsx(p,{children:e.jsx(j,{})}),e.jsx(N,{children:Object.values(me).map(s=>e.jsx(g,{value:s,className:"capitalize",children:s.replace(/_/g," ")},s))})]}),f.depreciationMethod&&e.jsx("p",{className:"text-sm text-destructive",children:f.depreciationMethod.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"depreciationRate",children:"Depreciation Rate (%) *"}),e.jsx(C,{id:"depreciationRate",type:"number",step:"0.01",...i("depreciationRate",{valueAsNumber:!0}),placeholder:"10",disabled:S===me.NO_DEPRECIATION}),f.depreciationRate&&e.jsx("p",{className:"text-sm text-destructive",children:f.depreciationRate.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"usefulLife",children:"Useful Life (years) *"}),e.jsx(C,{id:"usefulLife",type:"number",...i("usefulLife",{valueAsNumber:!0}),placeholder:"10"}),f.usefulLife&&e.jsx("p",{className:"text-sm text-destructive",children:f.usefulLife.message})]})]}),e.jsx("div",{className:"bg-muted p-4 rounded-lg",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.jsx("strong",{children:"Note:"})," Depreciation will be calculated automatically based on the selected method. Straight-line depreciation divides the cost evenly over the useful life, while declining balance applies a percentage to the remaining value each year."]})})]})]}),e.jsxs(c,{children:[e.jsxs(d,{children:[e.jsx(o,{children:"Additional Information"}),e.jsx(u,{children:"Any additional notes or remarks"})]}),e.jsx(m,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"remarks",children:"Remarks"}),e.jsx(X,{id:"remarks",...i("remarks"),placeholder:"Enter any additional notes or remarks",rows:4})]})})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(r,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),e.jsxs(r,{type:"submit",disabled:y,children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),y?"Saving...":s?"Update Asset":"Create Asset"]})]})]})]})},pe=({assets:a,staff:t,allocations:i,onAllocate:l,onDeallocate:n})=>{const[f,y]=s.useState(""),[A,S]=s.useState(""),[b,T]=s.useState(""),[D,E]=s.useState(!1),[$,z]=s.useState(null),[H,K]=s.useState(""),[Z,q]=s.useState(""),[ne,oe]=s.useState(""),[me,ue]=s.useState("list"),xe=s.useMemo(()=>a.filter(e=>{if(A&&e.assetType!==A)return!1;if("allocated"===b&&!e.allocatedTo)return!1;if("available"===b&&e.allocatedTo)return!1;if(f){const s=f.toLowerCase();return e.name.toLowerCase().includes(s)||e.assetCode.toLowerCase().includes(s)||e.allocatedToName&&e.allocatedToName.toLowerCase().includes(s)}return!0}),[a,A,b,f]),he=s.useMemo(()=>{const e=a.length,s=a.filter(e=>e.allocatedTo).length;return{totalAssets:e,allocatedAssets:s,availableAssets:e-s,utilizationRate:e>0?s/e*100:0,byType:a.reduce((e,s)=>(e[s.assetType]||(e[s.assetType]={total:0,allocated:0,available:0}),e[s.assetType].total++,s.allocatedTo?e[s.assetType].allocated++:e[s.assetType].available++,e),{}),byDepartment:a.reduce((e,s)=>{const a=s.department||"Unassigned";return e[a]||(e[a]={total:0,allocated:0,available:0}),e[a].total++,s.allocatedTo?e[a].allocated++:e[a].available++,e},{}),totalDepreciation:a.reduce((e,s)=>e+s.accumulatedDepreciation,0),totalCurrentValue:a.reduce((e,s)=>e+s.currentValue,0)}},[a]),pe=s.useMemo(()=>{const e=i.reduce((e,s)=>(s.isActive&&(e[s.allocatedTo]||(e[s.allocatedTo]={staffName:s.allocatedToName,assetCount:0,assets:[]}),e[s.allocatedTo].assetCount++,e[s.allocatedTo].assets.push(s.assetName)),e),{});return Object.entries(e).map(([e,s])=>({staffId:e,...s})).sort((e,s)=>s.assetCount-e.assetCount)},[i]),je=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e),Ne=[{accessorKey:"assetCode",header:"Asset Code",cell:({row:s})=>e.jsx("div",{className:"font-medium",children:s.original.assetCode})},{accessorKey:"name",header:"Asset Name",cell:({row:s})=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.original.name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:s.original.category})]})},{accessorKey:"assetType",header:"Type",cell:({row:s})=>e.jsx(v,{variant:"outline",className:"capitalize",children:s.original.assetType.replace(/_/g," ")})},{accessorKey:"currentValue",header:"Value",cell:({row:s})=>e.jsx("div",{className:"text-sm",children:je(s.original.currentValue)})},{accessorKey:"allocatedTo",header:"Allocated To",cell:({row:s})=>{return e.jsx("div",{children:s.original.allocatedTo?e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:s.original.allocatedToName}),s.original.allocationDate&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Since ",(a=s.original.allocationDate,new Date(a).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"}))]})]}):e.jsx(v,{variant:"secondary",children:"Available"})});var a}},{id:"actions",header:"Actions",cell:({row:s})=>e.jsxs("div",{className:"flex gap-2",children:[!s.original.allocatedTo&&s.original.status===de.AVAILABLE&&l&&e.jsxs(r,{variant:"outline",size:"sm",onClick:()=>{z(s.original),E(!0)},children:[e.jsx(M,{className:"h-4 w-4 mr-1"}),"Allocate"]}),s.original.allocatedTo&&n&&e.jsxs(r,{variant:"outline",size:"sm",onClick:()=>(e=>{if(e.allocatedTo&&n){const s=i.find(s=>s.assetId===e.id&&s.isActive);s&&n(s.id)}})(s.original),children:[e.jsx(O,{className:"h-4 w-4 mr-1"}),"Deallocate"]})]})}],ge=Object.entries(he.byType).map(([e,s])=>({name:e.replace(/_/g," "),allocated:s.allocated,available:s.available})),ve=[{name:"Allocated",value:he.allocatedAssets,color:"#10b981"},{name:"Available",value:he.availableAssets,color:"#6b7280"}],fe=Object.entries(he.byDepartment).slice(0,10).map(([e,s])=>({name:e,allocated:s.allocated,available:s.available}));return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Asset Allocation & Reporting"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Manage asset allocations and view utilization reports"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(r,{variant:"list"===me?"default":"outline",onClick:()=>ue("list"),children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Allocations"]}),e.jsxs(r,{variant:"reports"===me?"default":"outline",onClick:()=>ue("reports"),children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Reports"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(c,{children:[e.jsx(d,{className:"pb-3",children:e.jsx(o,{className:"text-sm font-medium",children:"Total Assets"})}),e.jsxs(m,{children:[e.jsx("div",{className:"text-2xl font-bold",children:he.totalAssets}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"All tracked assets"})]})]}),e.jsxs(c,{children:[e.jsx(d,{className:"pb-3",children:e.jsx(o,{className:"text-sm font-medium",children:"Allocated"})}),e.jsxs(m,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:he.allocatedAssets}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Currently in use"})]})]}),e.jsxs(c,{children:[e.jsx(d,{className:"pb-3",children:e.jsx(o,{className:"text-sm font-medium",children:"Available"})}),e.jsxs(m,{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-600",children:he.availableAssets}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Ready for allocation"})]})]}),e.jsxs(c,{children:[e.jsx(d,{className:"pb-3",children:e.jsx(o,{className:"text-sm font-medium",children:"Utilization Rate"})}),e.jsxs(m,{children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[he.utilizationRate.toFixed(1),"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Asset usage efficiency"})]})]})]}),"list"===me?e.jsxs(e.Fragment,{children:[e.jsxs(c,{children:[e.jsxs(d,{children:[e.jsx(o,{children:"Filters"}),e.jsx(u,{children:"Filter assets by type and allocation status"})]}),e.jsxs(m,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Asset Type"}),e.jsxs(h,{value:A||"all",onValueChange:e=>S("all"===e?"":e),children:[e.jsx(p,{children:e.jsx(j,{placeholder:"All"})}),e.jsxs(N,{children:[e.jsx(g,{value:"all",children:"All"}),Object.values(ce).map(s=>e.jsx(g,{value:s,className:"capitalize",children:s.replace(/_/g," ")},s))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Status"}),e.jsxs(h,{value:b||"all",onValueChange:e=>T("all"===e?"":e),children:[e.jsx(p,{children:e.jsx(j,{placeholder:"All"})}),e.jsxs(N,{children:[e.jsx(g,{value:"all",children:"All"}),e.jsx(g,{value:"allocated",children:"Allocated"}),e.jsx(g,{value:"available",children:"Available"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Search"}),e.jsx(V,{value:f,onChange:y,placeholder:"Search by name, code, or staff..."})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(r,{variant:"outline",onClick:()=>{S(""),T(""),y("")},children:"Clear Filters"})})]})]}),e.jsxs(c,{children:[e.jsxs(d,{children:[e.jsxs(o,{children:["Asset Allocations (",xe.length,")"]}),e.jsx(u,{children:"Manage asset allocations to staff members"})]}),e.jsx(m,{children:e.jsx(_,{columns:Ne,data:xe})})]}),pe.length>0&&e.jsxs(c,{children:[e.jsxs(d,{children:[e.jsx(o,{children:"Staff Usage Patterns"}),e.jsx(u,{children:"Assets allocated per staff member"})]}),e.jsx(m,{children:e.jsx("div",{className:"space-y-4",children:pe.slice(0,10).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:s.staffName}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.assets.slice(0,3).join(", "),s.assets.length>3&&` +${s.assets.length-3} more`]})]}),e.jsxs(v,{variant:"secondary",children:[s.assetCount," assets"]})]},s.staffId))})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(c,{children:[e.jsxs(d,{children:[e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-5 w-5"}),"Asset Utilization"]}),e.jsx(u,{children:"Overall allocation status"})]}),e.jsx(m,{children:e.jsx(Y,{width:"100%",height:300,children:e.jsxs(W,{children:[e.jsx(Q,{data:ve,cx:"50%",cy:"50%",labelLine:!1,label:({name:e,value:s,percent:a})=>`${e}: ${s} (${(100*a).toFixed(0)}%)`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:ve.map((s,a)=>e.jsx(J,{fill:s.color},`cell-${a}`))}),e.jsx(ee,{})]})})})]}),e.jsxs(c,{children:[e.jsxs(d,{children:[e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-5 w-5"}),"Depreciation Summary"]}),e.jsx(u,{children:"Asset value depreciation"})]}),e.jsx(m,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-between items-center p-4 bg-muted rounded-lg",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Current Value"}),e.jsx("div",{className:"text-2xl font-bold text-green-600",children:je(he.totalCurrentValue)})]})}),e.jsx("div",{className:"flex justify-between items-center p-4 bg-muted rounded-lg",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Accumulated Depreciation"}),e.jsx("div",{className:"text-2xl font-bold text-red-600",children:je(he.totalDepreciation)})]})}),e.jsx("div",{className:"flex justify-between items-center p-4 bg-muted rounded-lg",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Original Purchase Value"}),e.jsx("div",{className:"text-2xl font-bold",children:je(he.totalCurrentValue+he.totalDepreciation)})]})})]})})]})]}),e.jsxs(c,{children:[e.jsxs(d,{children:[e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-5 w-5"}),"Asset Distribution by Type"]}),e.jsx(u,{children:"Allocation status across asset types"})]}),e.jsx(m,{children:e.jsx(Y,{width:"100%",height:400,children:e.jsxs(se,{data:ge,children:[e.jsx(ae,{strokeDasharray:"3 3"}),e.jsx(te,{dataKey:"name",angle:-45,textAnchor:"end",height:100}),e.jsx(ie,{}),e.jsx(ee,{}),e.jsx(le,{}),e.jsx(re,{dataKey:"allocated",fill:"#10b981",name:"Allocated"}),e.jsx(re,{dataKey:"available",fill:"#6b7280",name:"Available"})]})})})]}),e.jsxs(c,{children:[e.jsxs(d,{children:[e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-5 w-5"}),"Asset Distribution by Department"]}),e.jsx(u,{children:"Top 10 departments by asset count"})]}),e.jsx(m,{children:e.jsx(Y,{width:"100%",height:400,children:e.jsxs(se,{data:fe,children:[e.jsx(ae,{strokeDasharray:"3 3"}),e.jsx(te,{dataKey:"name",angle:-45,textAnchor:"end",height:100}),e.jsx(ie,{}),e.jsx(ee,{}),e.jsx(le,{}),e.jsx(re,{dataKey:"allocated",fill:"#10b981",name:"Allocated"}),e.jsx(re,{dataKey:"available",fill:"#6b7280",name:"Available"})]})})})]})]}),e.jsx(k,{open:D,onOpenChange:E,children:e.jsxs(F,{children:[e.jsxs(P,{children:[e.jsx(G,{children:"Allocate Asset"}),e.jsxs(U,{children:["Assign ",null==$?void 0:$.name," (",null==$?void 0:$.assetCode,") to a staff member"]})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"staff",children:"Staff Member *"}),e.jsxs(h,{value:H,onValueChange:K,children:[e.jsx(p,{children:e.jsx(j,{placeholder:"Select staff member"})}),e.jsx(N,{children:t.filter(e=>e.isActive).map(s=>e.jsxs(g,{value:s.id,children:[s.name," - ",s.designation.replace(/_/g," ")," (",s.department,")"]},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"purpose",children:"Purpose *"}),e.jsx(C,{id:"purpose",value:Z,onChange:e=>q(e.target.value),placeholder:"e.g., Teaching, Research, Administration"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"remarks",children:"Remarks"}),e.jsx(X,{id:"remarks",value:ne,onChange:e=>oe(e.target.value),placeholder:"Any additional notes",rows:3})]})]}),e.jsxs(B,{children:[e.jsx(r,{variant:"outline",onClick:()=>E(!1),children:"Cancel"}),e.jsxs(r,{onClick:()=>{$&&H&&l&&(l($.id,H,Z,ne),E(!1),z(null),K(""),q(""),oe(""))},disabled:!H||!Z,children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Allocate"]})]})]})})]})},je=(e,s,a,t,i)=>{const l=new Date(s).getFullYear(),r=(new Date).getFullYear()-l;if(a===me.NO_DEPRECIATION)return{currentValue:e,accumulatedDepreciation:0};if(a===me.STRAIGHT_LINE){const s=e/i,a=Math.min(s*r,e);return{currentValue:Math.max(e-a,0),accumulatedDepreciation:a}}let n=e,c=0;for(let d=0;d<r&&d<i;d++){const e=n*(t/100);c+=e,n-=e}return{currentValue:Math.max(n,0),accumulatedDepreciation:c}},Ne=[...Array.from({length:15},(e,s)=>{const a=`${2018+s%6}-${String(s%12+1).padStart(2,"0")}-15`,t=45e3+5e3*s,{currentValue:i,accumulatedDepreciation:l}=je(t,a,me.DECLINING_BALANCE,40,5);return{id:`asset-comp-${String(s+1).padStart(3,"0")}`,assetCode:`COMP${String(s+1).padStart(4,"0")}`,name:`Desktop Computer ${s+1}`,description:`Dell OptiPlex ${3e3+10*s} Desktop`,assetType:ce.COMPUTER,category:"Desktop",manufacturer:"Dell",model:"OptiPlex "+(3e3+10*s),serialNumber:`SN-DELL-${String(s+1).padStart(6,"0")}`,purchaseDate:a,purchaseCost:t,supplier:"Tech Solutions Pvt Ltd",invoiceNumber:`INV-COMP-${String(s+1).padStart(4,"0")}`,warrantyExpiryDate:`${2021+s%6}-${String(s%12+1).padStart(2,"0")}-15`,status:s%8==0?de.UNDER_MAINTENANCE:s%10==0?de.DAMAGED:de.IN_USE,condition:s%3==0?oe.EXCELLENT:s%3==1?oe.GOOD:oe.FAIR,location:s%2==0?"Computer Lab 1":"Computer Lab 2",department:"Computer Science",depreciationMethod:me.DECLINING_BALANCE,depreciationRate:40,usefulLife:5,currentValue:i,accumulatedDepreciation:l,allocatedTo:s%8!=0?`staff-${String(s%35+1).padStart(3,"0")}`:void 0,allocatedToName:s%8!=0?"Staff Member "+(s%35+1):void 0,allocationDate:s%8!=0?a:void 0,lastMaintenanceDate:2023+s%2+"-06-15",nextMaintenanceDate:2024+s%2+"-06-15",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"}}),...Array.from({length:12},(e,s)=>{const a=`${2019+s%5}-${String(s%12+1).padStart(2,"0")}-10`,t=15e4+25e3*s,{currentValue:i,accumulatedDepreciation:l}=je(t,a,me.STRAIGHT_LINE,0,10),r=["Microscope","Spectrophotometer","Centrifuge","pH Meter","Incubator","Autoclave","Balance","Hot Plate","Distillation Unit","Fume Hood","Refrigerator","Oven"];return{id:`asset-lab-${String(s+1).padStart(3,"0")}`,assetCode:`LAB${String(s+1).padStart(4,"0")}`,name:`${r[s]}`,description:`Laboratory ${r[s]} for research and practical`,assetType:ce.LABORATORY,category:"Scientific Equipment",manufacturer:s%2==0?"Thermo Fisher":"Mettler Toledo",model:`Model-${String(s+100)}`,serialNumber:`SN-LAB-${String(s+1).padStart(6,"0")}`,purchaseDate:a,purchaseCost:t,supplier:"Scientific Instruments Ltd",invoiceNumber:`INV-LAB-${String(s+1).padStart(4,"0")}`,warrantyExpiryDate:`${2022+s%5}-${String(s%12+1).padStart(2,"0")}-10`,status:s%9==0?de.UNDER_MAINTENANCE:de.IN_USE,condition:s%4==0?oe.EXCELLENT:oe.GOOD,location:s%3==0?"Physics Lab":s%3==1?"Chemistry Lab":"Biology Lab",department:s%3==0?"Physics":s%3==1?"Chemistry":"Biology",depreciationMethod:me.STRAIGHT_LINE,depreciationRate:10,usefulLife:10,currentValue:i,accumulatedDepreciation:l,lastMaintenanceDate:2023+s%2+"-08-20",nextMaintenanceDate:2024+s%2+"-08-20",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"}}),...Array.from({length:15},(e,s)=>{const a=`${2017+s%7}-${String(s%12+1).padStart(2,"0")}-05`,t=8e3+2e3*s,{currentValue:i,accumulatedDepreciation:l}=je(t,a,me.STRAIGHT_LINE,0,15),r=["Desk","Chair","Table","Cabinet","Bookshelf"];return{id:`asset-furn-${String(s+1).padStart(3,"0")}`,assetCode:`FURN${String(s+1).padStart(4,"0")}`,name:`${r[s%5]} ${Math.floor(s/5)+1}`,description:`Office ${r[s%5]}`,assetType:ce.FURNITURE,category:r[s%5],manufacturer:"Godrej",model:`${r[s%5]}-${String(s+100)}`,purchaseDate:a,purchaseCost:t,supplier:"Office Furniture Mart",invoiceNumber:`INV-FURN-${String(s+1).padStart(4,"0")}`,status:s%12==0?de.DAMAGED:de.IN_USE,condition:s%5==0?oe.EXCELLENT:s%5==1?oe.GOOD:oe.FAIR,location:s%4==0?"Admin Office":s%4==1?"Faculty Room":s%4==2?"Library":"Classroom",department:s%4==0?"Administration":"Academic",depreciationMethod:me.STRAIGHT_LINE,depreciationRate:6.67,usefulLife:15,currentValue:i,accumulatedDepreciation:l,allocatedTo:s%4==1?`staff-${String(s%35+1).padStart(3,"0")}`:void 0,allocatedToName:s%4==1?"Staff Member "+(s%35+1):void 0,allocationDate:s%4==1?a:void 0,createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"}}),...Array.from({length:3},(e,s)=>{const a=`${2020+s}-03-15`,t=8e5+2e5*s,{currentValue:i,accumulatedDepreciation:l}=je(t,a,me.DECLINING_BALANCE,20,10),r=["Bus","Van","Car"];return{id:`asset-veh-${String(s+1).padStart(3,"0")}`,assetCode:`VEH${String(s+1).padStart(4,"0")}`,name:`College ${r[s]}`,description:`${r[s]} for college transportation`,assetType:ce.VEHICLE,category:r[s],manufacturer:0===s?"Tata Motors":1===s?"Mahindra":"Maruti Suzuki",model:0===s?"Starbus":1===s?"Bolero":"Ertiga",serialNumber:`MH12-${String(1e3+s)}`,purchaseDate:a,purchaseCost:t,supplier:"Auto Dealers Ltd",invoiceNumber:`INV-VEH-${String(s+1).padStart(4,"0")}`,warrantyExpiryDate:`${2023+s}-03-15`,status:1===s?de.UNDER_MAINTENANCE:de.IN_USE,condition:0===s?oe.GOOD:1===s?oe.FAIR:oe.EXCELLENT,location:"College Parking",department:"Transport",depreciationMethod:me.DECLINING_BALANCE,depreciationRate:20,usefulLife:10,currentValue:i,accumulatedDepreciation:l,lastMaintenanceDate:`2024-${String(2*(s+1)).padStart(2,"0")}-15`,nextMaintenanceDate:`2024-${String(2*(s+1)+3).padStart(2,"0")}-15`,remarks:1===s?"Scheduled for major service":void 0,createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"}}),...Array.from({length:5},(e,s)=>{const a=2021+s%3+"-07-01",t=25e3+15e3*s,{currentValue:i,accumulatedDepreciation:l}=je(t,a,me.STRAIGHT_LINE,0,10),r=["Book Scanner","RFID System","Barcode Scanner","Printer","Photocopier"];return{id:`asset-lib-${String(s+1).padStart(3,"0")}`,assetCode:`LIB${String(s+1).padStart(4,"0")}`,name:r[s],description:`Library ${r[s]} for book management`,assetType:ce.LIBRARY,category:"Library Equipment",manufacturer:s%2==0?"Canon":"HP",model:`Model-LIB-${String(s+100)}`,serialNumber:`SN-LIB-${String(s+1).padStart(6,"0")}`,purchaseDate:a,purchaseCost:t,supplier:"Library Solutions Ltd",invoiceNumber:`INV-LIB-${String(s+1).padStart(4,"0")}`,warrantyExpiryDate:2024+s%3+"-07-01",status:de.IN_USE,condition:s%3==0?oe.EXCELLENT:oe.GOOD,location:"Central Library",department:"Library",depreciationMethod:me.STRAIGHT_LINE,depreciationRate:10,usefulLife:10,currentValue:i,accumulatedDepreciation:l,lastMaintenanceDate:2023+s%2+"-12-15",nextMaintenanceDate:2024+s%2+"-12-15",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"}}),...Array.from({length:5},(e,s)=>{const a=2022+s%2+"-08-15",t=5e4+3e4*s,{currentValue:i,accumulatedDepreciation:l}=je(t,a,me.STRAIGHT_LINE,0,8),r=["Treadmill","Weight Set","Basketball Hoop","Volleyball Net","Cricket Kit"];return{id:`asset-sport-${String(s+1).padStart(3,"0")}`,assetCode:`SPORT${String(s+1).padStart(4,"0")}`,name:r[s],description:`Sports ${r[s]} for physical education`,assetType:ce.SPORTS,category:"Sports Equipment",manufacturer:s%2==0?"Cosco":"Nivia",model:`Model-SPORT-${String(s+100)}`,serialNumber:`SN-SPORT-${String(s+1).padStart(6,"0")}`,purchaseDate:a,purchaseCost:t,supplier:"Sports World",invoiceNumber:`INV-SPORT-${String(s+1).padStart(4,"0")}`,status:2===s?de.UNDER_MAINTENANCE:de.IN_USE,condition:s%2==0?oe.EXCELLENT:oe.GOOD,location:s<2?"Gymnasium":"Sports Ground",department:"Physical Education",depreciationMethod:me.STRAIGHT_LINE,depreciationRate:12.5,usefulLife:8,currentValue:i,accumulatedDepreciation:l,lastMaintenanceDate:2023+s%2+"-09-01",nextMaintenanceDate:2024+s%2+"-09-01",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"}}),...Array.from({length:5},(e,s)=>{const a=2020+s%4+"-05-20",t=35e3+2e4*s,{currentValue:i,accumulatedDepreciation:l}=je(t,a,me.STRAIGHT_LINE,0,10),r=["Projector","Sound System","Generator","Water Purifier","Air Conditioner"];return{id:`asset-other-${String(s+1).padStart(3,"0")}`,assetCode:`OTHER${String(s+1).padStart(4,"0")}`,name:r[s],description:`${r[s]} for college facilities`,assetType:ce.OTHER,category:"General Equipment",manufacturer:s%2==0?"Sony":s%3==0?"Kirloskar":"LG",model:`Model-${String(s+200)}`,serialNumber:`SN-OTHER-${String(s+1).padStart(6,"0")}`,purchaseDate:a,purchaseCost:t,supplier:"General Suppliers Ltd",invoiceNumber:`INV-OTHER-${String(s+1).padStart(4,"0")}`,warrantyExpiryDate:2023+s%4+"-05-20",status:2===s?de.UNDER_MAINTENANCE:de.IN_USE,condition:s%3==0?oe.EXCELLENT:oe.GOOD,location:s<2?"Auditorium":2===s?"Basement":"Admin Office",department:s<2?"Administration":"Facilities",depreciationMethod:me.STRAIGHT_LINE,depreciationRate:10,usefulLife:10,currentValue:i,accumulatedDepreciation:l,lastMaintenanceDate:2023+s%2+"-10-15",nextMaintenanceDate:2024+s%2+"-10-15",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"}})],ge=Ne.filter(e=>e.allocatedTo).map((e,s)=>({id:`alloc-${String(s+1).padStart(3,"0")}`,assetId:e.id,assetCode:e.assetCode,assetName:e.name,allocatedTo:e.allocatedTo,allocatedToName:e.allocatedToName,allocatedToEmail:`${e.allocatedTo}@college.edu.in`,allocationDate:e.allocationDate,purpose:s%3==0?"Teaching":s%3==1?"Research":"Administration",remarks:s%5==0?"High priority usage":void 0,isActive:!0,createdAt:e.allocationDate})),ve=()=>{const[r,c]=s.useState(Ne),[d,o]=s.useState(ge),[m,u]=s.useState("list"),[x,h]=s.useState(null);return e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Complete Asset Management System"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage institutional assets, track allocations, and generate utilization reports."})]}),e.jsxs(a,{value:m,onValueChange:u,children:[e.jsxs(t,{className:"grid w-full grid-cols-3",children:[e.jsxs(i,{value:"list",className:"flex items-center gap-2",children:[e.jsx($,{className:"h-4 w-4"}),"Asset List"]}),e.jsxs(i,{value:"allocation",className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-4 w-4"}),"Allocation & Reports"]}),e.jsxs(i,{value:"form",className:"flex items-center gap-2",children:[e.jsx(n,{className:"h-4 w-4"}),x?"Edit Asset":"Add Asset"]})]}),e.jsx(l,{value:"list",className:"mt-6",children:e.jsx(ue,{assets:r,onEdit:e=>{h(e),u("form")},onAdd:()=>{h(null),u("form")}})}),e.jsx(l,{value:"allocation",className:"mt-6",children:e.jsx(pe,{assets:r,staff:ne,allocations:d,onAllocate:(e,s,a,t)=>{const i=r.find(s=>s.id===e),l=ne.find(e=>e.id===s);if(!i||!l)return;const n={id:`alloc-${Date.now()}`,assetId:i.id,assetCode:i.assetCode,assetName:i.name,allocatedTo:l.id,allocatedToName:l.name,allocatedToEmail:l.email,allocationDate:(new Date).toISOString().split("T")[0],purpose:a,remarks:t,isActive:!0,createdAt:(new Date).toISOString()},m=r.map(s=>s.id===e?{...s,allocatedTo:l.id,allocatedToName:l.name,allocationDate:n.allocationDate,status:de.IN_USE}:s);c(m),o([...d,n])},onDeallocate:e=>{const s=d.find(s=>s.id===e);if(!s)return;const a=d.map(s=>s.id===e?{...s,isActive:!1,returnDate:(new Date).toISOString().split("T")[0]}:s),t=r.map(e=>e.id===s.assetId?{...e,allocatedTo:void 0,allocatedToName:void 0,allocationDate:void 0,status:de.AVAILABLE}:e);c(t),o(a)}})}),e.jsx(l,{value:"form",className:"mt-6",children:e.jsx(he,{asset:x||void 0,onSubmit:e=>{if(x){const s=r.map(s=>s.id===x.id?{...s,...e,updatedAt:(new Date).toISOString()}:s);c(s)}else{const s={id:`asset-new-${Date.now()}`,assetCode:`AST${String(Math.floor(1e4*Math.random())).padStart(4,"0")}`,...e,currentValue:e.purchaseCost,accumulatedDepreciation:0,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};c([...r,s])}u("list"),h(null)},onCancel:()=>{u("list"),h(null)}})})]}),e.jsxs("div",{className:"mt-8 p-4 bg-muted rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"System Features:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-foreground mb-1",children:"Asset Management"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Create and edit assets with complete details"}),e.jsx("li",{children:"Track purchase information and warranties"}),e.jsx("li",{children:"Automatic depreciation calculation"}),e.jsx("li",{children:"Filter and search capabilities"}),e.jsx("li",{children:"Asset status and condition tracking"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-foreground mb-1",children:"Allocation & Reporting"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Allocate assets to staff members"}),e.jsx("li",{children:"Track usage patterns and history"}),e.jsx("li",{children:"Real-time utilization statistics"}),e.jsx("li",{children:"Interactive charts and visualizations"}),e.jsx("li",{children:"Depreciation summaries and reports"})]})]})]})]})]})},fe=()=>e.jsx(ve,{});export{fe as AssetsModule,fe as default};
