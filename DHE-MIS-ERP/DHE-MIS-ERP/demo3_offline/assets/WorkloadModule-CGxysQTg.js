import{j as e}from"./ui-vendor-8V_oKEeO.js";import{T as a,a as s,b as r,c as t}from"./academics-yUGFON3d.js";import{r as l}from"./react-vendor-CNUWQFbP.js";import{c as i,s as c,n as o,u as d}from"./form-vendor-B1G7pw6y.js";import{n,o as u,p as m,V as h,q as x,r as j,t as f,I as v,w as p,ae as y,a8 as b,B as g,a1 as N,aC as k,ai as S,aj as W,ah as P,b as w,aD as C,a9 as A,T,H as F,v as H,az as D,$ as q,ab as K,u as M,W as R,aE as Z,aF as I,D as V,aG as z}from"./institute-BF3Og4ow.js";import{D as B}from"./verification-Bi_X-LS6.js";import{T as E}from"./index-BTNXxIF4.js";import{R as U,B as O,C as Y,X as $,Y as L,T as G,a as X,d as J,P as Q,e as _,f as ee}from"./chart-vendor-DjRgKakx.js";import"./query-vendor-B0hUVdFE.js";import"./i18n-vendor-DhCRt-fY.js";const ae=[{id:"formula-1",universityId:"univ-1",universityName:"University of Mumbai",studentsPerDivision:60,theoryWorkloadFormula:"(studentCount / studentsPerDivision) * theoryPapers * lectureHoursPerWeek",practicalWorkloadFormula:"(studentCount / studentsPerDivision) * practicalPapers * practicalHoursPerWeek * 0.5",description:"Standard workload calculation for Mumbai University affiliated colleges",effectiveFrom:"2024-06-01",isActive:!0,createdAt:"2024-05-15T10:00:00Z",updatedAt:"2024-05-15T10:00:00Z"},{id:"formula-2",universityId:"univ-2",universityName:"Savitribai Phule Pune University",studentsPerDivision:50,theoryWorkloadFormula:"(studentCount / studentsPerDivision) * theoryPapers * lectureHoursPerWeek",practicalWorkloadFormula:"(studentCount / studentsPerDivision) * practicalPapers * practicalHoursPerWeek * 0.6",description:"Workload calculation for Pune University affiliated colleges",effectiveFrom:"2024-06-01",isActive:!0,createdAt:"2024-05-15T10:00:00Z",updatedAt:"2024-05-15T10:00:00Z"}],se=[{id:"workload-1",instituteId:"inst-1",subject:"Computer Science",course:"B.Sc. Computer Science",year:1,semester:1,studentCount:180,divisions:3,theoryPapers:4,practicalPapers:2,lectureHoursPerWeek:4,practicalHoursPerWeek:6,calculatedTheoryWorkload:48,calculatedPracticalWorkload:36,totalWorkload:84,requiredStaff:3,availableStaff:2,vacancy:1,academicYear:"2024-25",createdAt:"2024-06-01T10:00:00Z",updatedAt:"2024-06-01T10:00:00Z"},{id:"workload-2",instituteId:"inst-1",subject:"Mathematics",course:"B.Sc. Mathematics",year:1,semester:1,studentCount:120,divisions:2,theoryPapers:5,practicalPapers:0,lectureHoursPerWeek:5,practicalHoursPerWeek:0,calculatedTheoryWorkload:50,calculatedPracticalWorkload:0,totalWorkload:50,requiredStaff:2,availableStaff:2,vacancy:0,academicYear:"2024-25",createdAt:"2024-06-01T10:00:00Z",updatedAt:"2024-06-01T10:00:00Z"},{id:"workload-3",instituteId:"inst-1",subject:"Physics",course:"B.Sc. Physics",year:1,semester:1,studentCount:90,divisions:2,theoryPapers:3,practicalPapers:3,lectureHoursPerWeek:4,practicalHoursPerWeek:6,calculatedTheoryWorkload:24,calculatedPracticalWorkload:27,totalWorkload:51,requiredStaff:2,availableStaff:1,vacancy:1,academicYear:"2024-25",createdAt:"2024-06-01T10:00:00Z",updatedAt:"2024-06-01T10:00:00Z"},{id:"workload-4",instituteId:"inst-1",subject:"Chemistry",course:"B.Sc. Chemistry",year:1,semester:1,studentCount:75,divisions:2,theoryPapers:3,practicalPapers:3,lectureHoursPerWeek:4,practicalHoursPerWeek:6,calculatedTheoryWorkload:24,calculatedPracticalWorkload:27,totalWorkload:51,requiredStaff:2,availableStaff:2,vacancy:0,academicYear:"2024-25",createdAt:"2024-06-01T10:00:00Z",updatedAt:"2024-06-01T10:00:00Z"},{id:"workload-5",instituteId:"inst-1",subject:"English",course:"B.A. English",year:1,semester:1,studentCount:150,divisions:3,theoryPapers:4,practicalPapers:0,lectureHoursPerWeek:5,practicalHoursPerWeek:0,calculatedTheoryWorkload:60,calculatedPracticalWorkload:0,totalWorkload:60,requiredStaff:2,availableStaff:3,vacancy:-1,academicYear:"2024-25",createdAt:"2024-06-01T10:00:00Z",updatedAt:"2024-06-01T10:00:00Z"},{id:"workload-6",instituteId:"inst-1",subject:"History",course:"B.A. History",year:1,semester:1,studentCount:100,divisions:2,theoryPapers:4,practicalPapers:0,lectureHoursPerWeek:5,practicalHoursPerWeek:0,calculatedTheoryWorkload:40,calculatedPracticalWorkload:0,totalWorkload:40,requiredStaff:2,availableStaff:1,vacancy:1,academicYear:"2024-25",createdAt:"2024-06-01T10:00:00Z",updatedAt:"2024-06-01T10:00:00Z"},{id:"workload-7",instituteId:"inst-1",subject:"Economics",course:"B.A. Economics",year:1,semester:1,studentCount:110,divisions:2,theoryPapers:4,practicalPapers:0,lectureHoursPerWeek:5,practicalHoursPerWeek:0,calculatedTheoryWorkload:40,calculatedPracticalWorkload:0,totalWorkload:40,requiredStaff:2,availableStaff:2,vacancy:0,academicYear:"2024-25",createdAt:"2024-06-01T10:00:00Z",updatedAt:"2024-06-01T10:00:00Z"},{id:"workload-8",instituteId:"inst-1",subject:"Commerce",course:"B.Com",year:1,semester:1,studentCount:200,divisions:4,theoryPapers:5,practicalPapers:1,lectureHoursPerWeek:4,practicalHoursPerWeek:4,calculatedTheoryWorkload:80,calculatedPracticalWorkload:16,totalWorkload:96,requiredStaff:4,availableStaff:3,vacancy:1,academicYear:"2024-25",createdAt:"2024-06-01T10:00:00Z",updatedAt:"2024-06-01T10:00:00Z"},{id:"workload-9",instituteId:"inst-1",subject:"Information Technology",course:"B.Sc. IT",year:2,semester:3,studentCount:160,divisions:3,theoryPapers:4,practicalPapers:3,lectureHoursPerWeek:4,practicalHoursPerWeek:6,calculatedTheoryWorkload:48,calculatedPracticalWorkload:54,totalWorkload:102,requiredStaff:4,availableStaff:2,vacancy:2,academicYear:"2024-25",createdAt:"2024-06-01T10:00:00Z",updatedAt:"2024-06-01T10:00:00Z"},{id:"workload-10",instituteId:"inst-1",subject:"Biotechnology",course:"B.Sc. Biotechnology",year:2,semester:3,studentCount:60,divisions:1,theoryPapers:3,practicalPapers:4,lectureHoursPerWeek:4,practicalHoursPerWeek:8,calculatedTheoryWorkload:12,calculatedPracticalWorkload:32,totalWorkload:44,requiredStaff:2,availableStaff:1,vacancy:1,academicYear:"2024-25",createdAt:"2024-06-01T10:00:00Z",updatedAt:"2024-06-01T10:00:00Z"}],re=i({subject:c().min(1,"Subject is required"),course:c().min(1,"Course is required"),year:o().min(1).max(5),semester:o().min(1).max(10),studentCount:o().min(1,"Student count must be at least 1"),divisions:o().min(1,"Divisions must be at least 1"),theoryPapers:o().min(0,"Theory papers cannot be negative"),practicalPapers:o().min(0,"Practical papers cannot be negative"),lectureHoursPerWeek:o().min(0,"Lecture hours cannot be negative"),practicalHoursPerWeek:o().min(0,"Practical hours cannot be negative"),availableStaff:o().min(0,"Available staff cannot be negative")}),te=e=>{const a=ae[0].studentsPerDivision,s=e.studentCount/a*e.theoryPapers*e.lectureHoursPerWeek,r=e.studentCount/a*e.practicalPapers*e.practicalHoursPerWeek*.5,t=s+r,l=Math.ceil(t/16),i=l-e.availableStaff,c=e.availableStaff>0?Math.round(t/(16*e.availableStaff)*100):0;return{theoryWorkload:Math.round(10*s)/10,practicalWorkload:Math.round(10*r)/10,totalWorkload:Math.round(10*t)/10,requiredStaff:l,availableStaff:e.availableStaff,vacancy:i,utilizationPercentage:c}},le=()=>{const[i,c]=l.useState(null),[o]=l.useState(se),[F,H]=l.useState("calculator"),{register:D,handleSubmit:q,formState:{errors:K},reset:M,watch:R}=d({resolver:P(re),defaultValues:{subject:"Computer Science",course:"B.Sc. Computer Science",year:1,semester:1,studentCount:60,divisions:1,theoryPapers:4,practicalPapers:2,lectureHoursPerWeek:4,practicalHoursPerWeek:6,availableStaff:2}}),Z=R();l.useEffect(()=>{if(Z.studentCount>0&&Z.divisions>0){const e=te(Z);c(e)}},[Z]);const I=a=>a>0?e.jsxs(w,{variant:"destructive",className:"gap-1",children:[e.jsx(C,{className:"h-3 w-3"}),a," Vacancy"]}):0===a?e.jsxs(w,{variant:"default",className:"gap-1",children:[e.jsx(A,{className:"h-3 w-3"}),"Adequate"]}):e.jsxs(w,{variant:"secondary",className:"gap-1",children:[e.jsx(T,{className:"h-3 w-3"}),Math.abs(a)," Surplus"]}),V=[{accessorKey:"subject",header:"Subject"},{accessorKey:"course",header:"Course"},{accessorKey:"year",header:"Year"},{accessorKey:"semester",header:"Semester"},{accessorKey:"totalWorkload",header:"Total Workload",cell:({row:e})=>`${e.original.totalWorkload} hrs`},{accessorKey:"requiredStaff",header:"Required Staff"},{accessorKey:"vacancy",header:"Status",cell:({row:e})=>I(e.original.vacancy)}];return e.jsx("div",{className:"space-y-6",children:e.jsxs(n,{children:[e.jsxs(u,{children:[e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-5 w-5"}),"Workload Calculator"]}),e.jsx(x,{children:"Calculate faculty workload based on student enrollment and course structure"})]}),e.jsx(j,{children:e.jsxs(a,{value:F,onValueChange:H,children:[e.jsxs(s,{className:"grid w-full grid-cols-2",children:[e.jsx(r,{value:"calculator",children:"Calculator"}),e.jsx(r,{value:"saved",children:"Saved Workloads"})]}),e.jsxs(t,{value:"calculator",className:"space-y-6",children:[e.jsxs("form",{onSubmit:q(e=>{const a=te(e);c(a)}),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"subject",children:"Subject"}),e.jsx(v,{id:"subject",...D("subject"),placeholder:"e.g., Computer Science"}),K.subject&&e.jsx("p",{className:"text-sm text-red-600",children:K.subject.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"course",children:"Course"}),e.jsx(v,{id:"course",...D("course"),placeholder:"e.g., B.Sc. Computer Science"}),K.course&&e.jsx("p",{className:"text-sm text-red-600",children:K.course.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"year",children:"Year"}),e.jsx(v,{id:"year",type:"number",...D("year",{valueAsNumber:!0})}),K.year&&e.jsx("p",{className:"text-sm text-red-600",children:K.year.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"semester",children:"Semester"}),e.jsx(v,{id:"semester",type:"number",...D("semester",{valueAsNumber:!0})}),K.semester&&e.jsx("p",{className:"text-sm text-red-600",children:K.semester.message})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(f,{htmlFor:"studentCount",className:"flex items-center gap-2",children:[e.jsx(p,{className:"h-4 w-4"}),"Student Count"]}),e.jsx(v,{id:"studentCount",type:"number",...D("studentCount",{valueAsNumber:!0})}),K.studentCount&&e.jsx("p",{className:"text-sm text-red-600",children:K.studentCount.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"divisions",children:"Divisions"}),e.jsx(v,{id:"divisions",type:"number",...D("divisions",{valueAsNumber:!0})}),K.divisions&&e.jsx("p",{className:"text-sm text-red-600",children:K.divisions.message})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(f,{htmlFor:"theoryPapers",className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-4 w-4"}),"Theory Papers"]}),e.jsx(v,{id:"theoryPapers",type:"number",...D("theoryPapers",{valueAsNumber:!0})}),K.theoryPapers&&e.jsx("p",{className:"text-sm text-red-600",children:K.theoryPapers.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"practicalPapers",children:"Practical Papers"}),e.jsx(v,{id:"practicalPapers",type:"number",...D("practicalPapers",{valueAsNumber:!0})}),K.practicalPapers&&e.jsx("p",{className:"text-sm text-red-600",children:K.practicalPapers.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(f,{htmlFor:"lectureHoursPerWeek",className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-4 w-4"}),"Lecture Hours/Week"]}),e.jsx(v,{id:"lectureHoursPerWeek",type:"number",...D("lectureHoursPerWeek",{valueAsNumber:!0})}),K.lectureHoursPerWeek&&e.jsx("p",{className:"text-sm text-red-600",children:K.lectureHoursPerWeek.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"practicalHoursPerWeek",children:"Practical Hours/Week"}),e.jsx(v,{id:"practicalHoursPerWeek",type:"number",...D("practicalHoursPerWeek",{valueAsNumber:!0})}),K.practicalHoursPerWeek&&e.jsx("p",{className:"text-sm text-red-600",children:K.practicalHoursPerWeek.message})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"availableStaff",children:"Available Staff"}),e.jsx(v,{id:"availableStaff",type:"number",...D("availableStaff",{valueAsNumber:!0})}),K.availableStaff&&e.jsx("p",{className:"text-sm text-red-600",children:K.availableStaff.message})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(g,{type:"submit",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Calculate"]}),e.jsxs(g,{type:"button",variant:"outline",onClick:()=>{M(),c(null)},children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Reset"]})]})]}),i&&e.jsxs("div",{className:"space-y-4 pt-6 border-t",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Calculation Results"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(n,{children:[e.jsx(u,{className:"pb-3",children:e.jsx(m,{className:"text-sm font-medium",children:"Theory Workload"})}),e.jsx(j,{children:e.jsxs("div",{className:"text-2xl font-bold",children:[i.theoryWorkload," hrs"]})})]}),e.jsxs(n,{children:[e.jsx(u,{className:"pb-3",children:e.jsx(m,{className:"text-sm font-medium",children:"Practical Workload"})}),e.jsx(j,{children:e.jsxs("div",{className:"text-2xl font-bold",children:[i.practicalWorkload," hrs"]})})]}),e.jsxs(n,{children:[e.jsx(u,{className:"pb-3",children:e.jsx(m,{className:"text-sm font-medium",children:"Total Workload"})}),e.jsx(j,{children:e.jsxs("div",{className:"text-2xl font-bold",children:[i.totalWorkload," hrs"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(S,{children:e.jsx(W,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Required Staff:"}),e.jsx("span",{className:"text-lg font-bold",children:i.requiredStaff})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Available Staff:"}),e.jsx("span",{className:"text-lg font-bold",children:i.availableStaff})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Status:"}),I(i.vacancy)]})]})})}),e.jsx(S,{children:e.jsx(W,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Staff Utilization:"}),e.jsxs("span",{className:"text-lg font-bold "+(z=i.utilizationPercentage,z>100?"text-red-600":z>80?"text-yellow-600":"text-green-600"),children:[i.utilizationPercentage,"%"]})]}),i.utilizationPercentage>100&&e.jsx("p",{className:"text-sm text-red-600",children:"Staff is overutilized. Consider hiring additional faculty."})]})})})]})]})]}),e.jsx(t,{value:"saved",className:"space-y-4",children:e.jsx(B,{columns:V,data:o})})]})})]})});var z},ie=i({universityName:c().min(1,"University name is required"),studentsPerDivision:o().min(1,"Students per division must be at least 1"),theoryWorkloadFormula:c().min(1,"Theory workload formula is required"),practicalWorkloadFormula:c().min(1,"Practical workload formula is required"),description:c().optional()}),ce=()=>{const[a,s]=l.useState(ae),[r,t]=l.useState(null),[i,c]=l.useState(!1),[o,p]=l.useState(!1),{register:y,handleSubmit:b,formState:{errors:N},reset:k,setValue:C}=d({resolver:P(ie),defaultValues:{universityName:"",studentsPerDivision:60,theoryWorkloadFormula:"(studentCount / studentsPerDivision) * theoryPapers * lectureHoursPerWeek",practicalWorkloadFormula:"(studentCount / studentsPerDivision) * practicalPapers * practicalHoursPerWeek * 0.5",description:""}}),T=()=>{t(null),c(!1),k()},R=[{accessorKey:"universityName",header:"University",cell:({row:a})=>e.jsx("div",{className:"font-medium",children:a.original.universityName})},{accessorKey:"studentsPerDivision",header:"Students/Division",cell:({row:a})=>e.jsx("div",{className:"text-center",children:a.original.studentsPerDivision})},{accessorKey:"effectiveFrom",header:"Effective From",cell:({row:a})=>e.jsx("div",{children:new Date(a.original.effectiveFrom).toLocaleDateString()})},{accessorKey:"isActive",header:"Status",cell:({row:a})=>e.jsx(w,{variant:a.original.isActive?"default":"secondary",children:a.original.isActive?"Active":"Inactive"})},{id:"actions",header:"Actions",cell:({row:r})=>e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>{return e=r.original,t(e),C("universityName",e.universityName),C("studentsPerDivision",e.studentsPerDivision),C("theoryWorkloadFormula",e.theoryWorkloadFormula),C("practicalWorkloadFormula",e.practicalWorkloadFormula),C("description",e.description||""),void c(!0);var e},children:[e.jsx(M,{className:"h-4 w-4 mr-1"}),"Edit"]}),e.jsx(g,{variant:r.original.isActive?"secondary":"default",size:"sm",onClick:()=>{return e=r.original.id,void s(a.map(a=>a.id===e?{...a,isActive:!a.isActive,updatedAt:(new Date).toISOString()}:a));var e},children:r.original.isActive?"Deactivate":"Activate"})]})}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[e.jsx(F,{className:"h-8 w-8"}),"Formula Configuration"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Configure university-specific workload calculation formulas"})]}),!i&&e.jsxs(g,{onClick:()=>c(!0),children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Add Formula"]})]}),o&&e.jsxs(S,{className:"bg-green-50 border-green-200",children:[e.jsx(A,{className:"h-4 w-4 text-green-600"}),e.jsx(W,{className:"text-green-800",children:"Formula saved successfully!"})]}),i&&e.jsxs(n,{children:[e.jsxs(u,{children:[e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-5 w-5"}),r?"Edit Formula":"New Formula"]}),e.jsx(x,{children:"Configure workload calculation parameters for a university"})]}),e.jsx(j,{children:e.jsxs("form",{onSubmit:b(e=>{if(r)s(a.map(a=>a.id===r.id?{...a,...e,updatedAt:(new Date).toISOString()}:a));else{const r={id:`formula-${Date.now()}`,universityId:`univ-${Date.now()}`,...e,effectiveFrom:(new Date).toISOString().split("T")[0],isActive:!0,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};s([...a,r])}p(!0),setTimeout(()=>p(!1),3e3),T()}),className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"universityName",children:"University Name *"}),e.jsx(v,{id:"universityName",...y("universityName"),placeholder:"e.g., University of Mumbai"}),N.universityName&&e.jsx("p",{className:"text-sm text-red-600",children:N.universityName.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"studentsPerDivision",children:"Students Per Division *"}),e.jsx(v,{id:"studentsPerDivision",type:"number",...y("studentsPerDivision",{valueAsNumber:!0}),placeholder:"60"}),N.studentsPerDivision&&e.jsx("p",{className:"text-sm text-red-600",children:N.studentsPerDivision.message}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Maximum number of students allowed per division"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"theoryWorkloadFormula",children:"Theory Workload Formula *"}),e.jsx(E,{id:"theoryWorkloadFormula",...y("theoryWorkloadFormula"),placeholder:"(studentCount / studentsPerDivision) * theoryPapers * lectureHoursPerWeek",rows:3}),N.theoryWorkloadFormula&&e.jsx("p",{className:"text-sm text-red-600",children:N.theoryWorkloadFormula.message}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Formula to calculate theory workload hours"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"practicalWorkloadFormula",children:"Practical Workload Formula *"}),e.jsx(E,{id:"practicalWorkloadFormula",...y("practicalWorkloadFormula"),placeholder:"(studentCount / studentsPerDivision) * practicalPapers * practicalHoursPerWeek * 0.5",rows:3}),N.practicalWorkloadFormula&&e.jsx("p",{className:"text-sm text-red-600",children:N.practicalWorkloadFormula.message}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Formula to calculate practical workload hours (typically with batch multiplier)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"description",children:"Description"}),e.jsx(E,{id:"description",...y("description"),placeholder:"Additional notes about this formula configuration",rows:2})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(g,{type:"submit",children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),r?"Update Formula":"Save Formula"]}),e.jsx(g,{type:"button",variant:"outline",onClick:T,children:"Cancel"})]})]})})]}),e.jsxs(n,{children:[e.jsxs(u,{children:[e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-5 w-5"}),"Available Parameters"]}),e.jsx(x,{children:"Parameters that can be used in formula expressions"})]}),e.jsx(j,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[{name:"studentCount",value:0,description:"Total number of students enrolled",unit:"students"},{name:"studentsPerDivision",value:60,description:"Maximum students per division",unit:"students"},{name:"theoryPapers",value:0,description:"Number of theory papers",unit:"papers"},{name:"practicalPapers",value:0,description:"Number of practical papers",unit:"papers"},{name:"lectureHoursPerWeek",value:0,description:"Theory lecture hours per week",unit:"hours"},{name:"practicalHoursPerWeek",value:0,description:"Practical hours per week",unit:"hours"}].map(a=>e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsx("div",{className:"font-mono text-sm font-semibold text-blue-600",children:a.name}),e.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:a.description}),a.unit&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Unit: ",a.unit]})]},a.name))})})]}),e.jsxs(n,{children:[e.jsxs(u,{children:[e.jsx(m,{children:"Configured Formulas"}),e.jsx(x,{children:"Manage existing workload calculation formulas"})]}),e.jsx(j,{children:a.length>0?e.jsx(B,{data:a,columns:R}):e.jsxs(S,{children:[e.jsx(K,{className:"h-4 w-4"}),e.jsx(W,{children:'No formulas configured yet. Click "Add Formula" to create one.'})]})})]})]})},oe=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899"],de=()=>{const[i]=l.useState(se),[c,o]=l.useState("overview"),d=l.useMemo(()=>{const e=i.length,a=i.reduce((e,a)=>e+a.studentCount,0),s=i.reduce((e,a)=>e+a.totalWorkload,0),r=i.reduce((e,a)=>e+a.requiredStaff,0),t=i.reduce((e,a)=>e+a.availableStaff,0),l=i.reduce((e,a)=>e+Math.max(0,a.vacancy),0),c=t>0?Math.round(s/(16*t)*100):0,o={};i.forEach(e=>{o[e.subject]||(o[e.subject]={theoryWorkload:0,practicalWorkload:0,totalWorkload:0,requiredStaff:0,availableStaff:0,vacancy:0,utilizationPercentage:0}),o[e.subject].theoryWorkload+=e.calculatedTheoryWorkload,o[e.subject].practicalWorkload+=e.calculatedPracticalWorkload,o[e.subject].totalWorkload+=e.totalWorkload,o[e.subject].requiredStaff+=e.requiredStaff,o[e.subject].availableStaff+=e.availableStaff,o[e.subject].vacancy+=e.vacancy}),Object.keys(o).forEach(e=>{const a=o[e];a.utilizationPercentage=a.availableStaff>0?Math.round(a.totalWorkload/(16*a.availableStaff)*100):0});const d={};return i.forEach(e=>{d[e.course]||(d[e.course]={theoryWorkload:0,practicalWorkload:0,totalWorkload:0,requiredStaff:0,availableStaff:0,vacancy:0,utilizationPercentage:0}),d[e.course].theoryWorkload+=e.calculatedTheoryWorkload,d[e.course].practicalWorkload+=e.calculatedPracticalWorkload,d[e.course].totalWorkload+=e.totalWorkload,d[e.course].requiredStaff+=e.requiredStaff,d[e.course].availableStaff+=e.availableStaff,d[e.course].vacancy+=e.vacancy}),Object.keys(d).forEach(e=>{const a=d[e];a.utilizationPercentage=a.availableStaff>0?Math.round(a.totalWorkload/(16*a.availableStaff)*100):0}),{totalSubjects:e,totalStudents:a,totalWorkload:s,totalRequiredStaff:r,totalAvailableStaff:t,totalVacancies:l,averageUtilization:c,bySubject:o,byCourse:d}},[i]),h=l.useMemo(()=>i.filter(e=>0!==e.vacancy).map(e=>({subject:e.subject,course:e.course,currentStaff:e.availableStaff,requiredStaff:e.requiredStaff,recommendedAction:e.vacancy>0?"recruit":"redistribute",priority:e.vacancy>=2?"high":1===e.vacancy?"medium":"low",notes:e.vacancy>0?`Recruit ${e.vacancy} additional staff member(s)`:`Consider redistributing ${Math.abs(e.vacancy)} staff to understaffed subjects`})).sort((e,a)=>{const s={high:0,medium:1,low:2};return s[e.priority]-s[a.priority]}),[i]),f=l.useMemo(()=>Object.entries(d.bySubject).map(([e,a])=>({subject:e.length>15?e.substring(0,15)+"...":e,"Theory Workload":a.theoryWorkload,"Practical Workload":a.practicalWorkload,"Total Workload":a.totalWorkload})),[d]),v=l.useMemo(()=>Object.entries(d.bySubject).map(([e,a])=>({subject:e.length>15?e.substring(0,15)+"...":e,"Required Staff":a.requiredStaff,"Available Staff":a.availableStaff})),[d]),y=l.useMemo(()=>[{name:"With Vacancy",value:i.filter(e=>e.vacancy>0).length},{name:"Adequate",value:i.filter(e=>0===e.vacancy).length},{name:"Surplus",value:i.filter(e=>e.vacancy<0).length}],[i]),b=[{accessorKey:"subject",header:"Subject",cell:({row:a})=>e.jsx("div",{className:"font-medium",children:a.original.subject})},{accessorKey:"course",header:"Course",cell:({row:a})=>e.jsx("div",{className:"text-sm",children:a.original.course})},{accessorKey:"studentCount",header:"Students",cell:({row:a})=>e.jsx("div",{className:"text-center",children:a.original.studentCount})},{accessorKey:"totalWorkload",header:"Total Workload",cell:({row:a})=>e.jsxs("div",{className:"text-center font-medium",children:[a.original.totalWorkload," hrs"]})},{accessorKey:"requiredStaff",header:"Required",cell:({row:a})=>e.jsx("div",{className:"text-center",children:a.original.requiredStaff})},{accessorKey:"availableStaff",header:"Available",cell:({row:a})=>e.jsx("div",{className:"text-center",children:a.original.availableStaff})},{accessorKey:"vacancy",header:"Vacancy",cell:({row:a})=>{const s=a.original.vacancy;return e.jsx("div",{className:"flex justify-center",children:s>0?e.jsxs(w,{variant:"destructive",className:"gap-1",children:[e.jsx(C,{className:"h-3 w-3"}),s]}):0===s?e.jsxs(w,{variant:"default",className:"gap-1",children:[e.jsx(A,{className:"h-3 w-3"}),"Adequate"]}):e.jsxs(w,{variant:"secondary",className:"gap-1",children:[e.jsx(T,{className:"h-3 w-3"}),Math.abs(s)," Surplus"]})})}}],k=[{accessorKey:"priority",header:"Priority",cell:({row:a})=>{const s=a.original.priority,r="high"===s?"destructive":"medium"===s?"default":"secondary";return e.jsx(w,{variant:r,children:s.toUpperCase()})}},{accessorKey:"subject",header:"Subject",cell:({row:a})=>e.jsx("div",{className:"font-medium",children:a.original.subject})},{accessorKey:"course",header:"Course",cell:({row:a})=>e.jsx("div",{className:"text-sm",children:a.original.course})},{accessorKey:"currentStaff",header:"Current Staff",cell:({row:a})=>e.jsx("div",{className:"text-center",children:a.original.currentStaff})},{accessorKey:"requiredStaff",header:"Required Staff",cell:({row:a})=>e.jsx("div",{className:"text-center",children:a.original.requiredStaff})},{accessorKey:"recommendedAction",header:"Action",cell:({row:a})=>{const s=a.original.recommendedAction;return e.jsx(w,{variant:"recruit"===s?"default":"secondary",children:"recruit"===s?"Recruit":"Redistribute"})}},{accessorKey:"notes",header:"Notes",cell:({row:a})=>e.jsx("div",{className:"text-sm text-muted-foreground",children:a.original.notes})}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[e.jsx(R,{className:"h-8 w-8"}),"Workload Report"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Comprehensive workload analysis and staff recommendations"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(g,{variant:"outline",onClick:()=>{window.print()},children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),"Print"]}),e.jsxs(g,{variant:"outline",onClick:()=>{const e=i.map(e=>[e.subject,e.course,e.studentCount,e.calculatedTheoryWorkload,e.calculatedPracticalWorkload,e.totalWorkload,e.requiredStaff,e.availableStaff,e.vacancy]),a=[["Subject","Course","Students","Theory Workload","Practical Workload","Total Workload","Required Staff","Available Staff","Vacancy"].join(","),...e.map(e=>e.join(","))].join("\n"),s=new Blob([a],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a"),t=URL.createObjectURL(s);r.setAttribute("href",t),r.setAttribute("download",`workload-report-${(new Date).toISOString().split("T")[0]}.csv`),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r)},children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Export Excel"]}),e.jsxs(g,{onClick:()=>{alert("PDF export functionality would be implemented here using a library like jsPDF or react-pdf")},children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Export PDF"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(n,{children:[e.jsx(u,{className:"pb-3",children:e.jsx(m,{className:"text-sm font-medium text-muted-foreground",children:"Total Subjects"})}),e.jsxs(j,{children:[e.jsx("div",{className:"text-3xl font-bold",children:d.totalSubjects}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Across all courses"})]})]}),e.jsxs(n,{children:[e.jsx(u,{className:"pb-3",children:e.jsx(m,{className:"text-sm font-medium text-muted-foreground",children:"Total Workload"})}),e.jsxs(j,{children:[e.jsx("div",{className:"text-3xl font-bold",children:d.totalWorkload}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Hours per week"})]})]}),e.jsxs(n,{children:[e.jsx(u,{className:"pb-3",children:e.jsx(m,{className:"text-sm font-medium text-muted-foreground",children:"Staff Status"})}),e.jsxs(j,{children:[e.jsxs("div",{className:"text-3xl font-bold",children:[d.totalAvailableStaff,"/",d.totalRequiredStaff]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Available / Required"})]})]}),e.jsxs(n,{children:[e.jsx(u,{className:"pb-3",children:e.jsx(m,{className:"text-sm font-medium text-muted-foreground",children:"Total Vacancies"})}),e.jsxs(j,{children:[e.jsx("div",{className:"text-3xl font-bold text-red-600",children:d.totalVacancies}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Positions to fill"})]})]})]}),e.jsxs(a,{value:c,onValueChange:o,children:[e.jsxs(s,{className:"grid w-full grid-cols-4",children:[e.jsx(r,{value:"overview",children:"Overview"}),e.jsx(r,{value:"details",children:"Detailed View"}),e.jsx(r,{value:"charts",children:"Charts"}),e.jsx(r,{value:"recommendations",children:"Recommendations"})]}),e.jsx(t,{value:"overview",className:"space-y-4",children:e.jsxs(n,{children:[e.jsxs(u,{children:[e.jsx(m,{children:"Workload Summary"}),e.jsx(x,{children:"Overall workload distribution and utilization"})]}),e.jsx(j,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Students"}),e.jsx("div",{className:"text-2xl font-bold mt-1",children:d.totalStudents})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Average Utilization"}),e.jsxs("div",{className:"text-2xl font-bold mt-1",children:[d.averageUtilization,"%"]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Subjects with Vacancy"}),e.jsx("div",{className:"text-2xl font-bold mt-1 text-red-600",children:i.filter(e=>e.vacancy>0).length})]})]}),d.totalVacancies>0&&e.jsxs(S,{variant:"destructive",children:[e.jsx(C,{className:"h-4 w-4"}),e.jsxs(W,{children:[e.jsxs("strong",{children:[d.totalVacancies," staff positions"]})," need to be filled across ",i.filter(e=>e.vacancy>0).length," subjects. Review the recommendations tab for detailed action items."]})]})]})})]})}),e.jsx(t,{value:"details",children:e.jsxs(n,{children:[e.jsxs(u,{children:[e.jsx(m,{children:"Subject-wise Workload Distribution"}),e.jsx(x,{children:"Detailed breakdown of workload for each subject"})]}),e.jsx(j,{children:e.jsx(B,{data:i,columns:b})})]})}),e.jsxs(t,{value:"charts",className:"space-y-4",children:[e.jsxs(n,{children:[e.jsx(u,{children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-5 w-5"}),"Workload Distribution by Subject"]})}),e.jsx(j,{children:e.jsx(U,{width:"100%",height:400,children:e.jsxs(O,{data:f,children:[e.jsx(Y,{strokeDasharray:"3 3"}),e.jsx($,{dataKey:"subject",angle:-45,textAnchor:"end",height:100}),e.jsx(L,{label:{value:"Hours per Week",angle:-90,position:"insideLeft"}}),e.jsx(G,{}),e.jsx(X,{}),e.jsx(J,{dataKey:"Theory Workload",fill:"#3b82f6"}),e.jsx(J,{dataKey:"Practical Workload",fill:"#10b981"})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs(n,{children:[e.jsx(u,{children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(p,{className:"h-5 w-5"}),"Staff Requirement vs Availability"]})}),e.jsx(j,{children:e.jsx(U,{width:"100%",height:300,children:e.jsxs(O,{data:v,children:[e.jsx(Y,{strokeDasharray:"3 3"}),e.jsx($,{dataKey:"subject",angle:-45,textAnchor:"end",height:100}),e.jsx(L,{}),e.jsx(G,{}),e.jsx(X,{}),e.jsx(J,{dataKey:"Required Staff",fill:"#f59e0b"}),e.jsx(J,{dataKey:"Available Staff",fill:"#10b981"})]})})})]}),e.jsxs(n,{children:[e.jsx(u,{children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-5 w-5"}),"Staffing Status Distribution"]})}),e.jsx(j,{children:e.jsx(U,{width:"100%",height:300,children:e.jsxs(Q,{children:[e.jsx(_,{data:y,cx:"50%",cy:"50%",labelLine:!1,label:({name:e,value:a})=>`${e}: ${a}`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:y.map((a,s)=>e.jsx(ee,{fill:oe[s%oe.length]},`cell-${s}`))}),e.jsx(G,{})]})})})]})]})]}),e.jsx(t,{value:"recommendations",children:e.jsxs(n,{children:[e.jsxs(u,{children:[e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-5 w-5"}),"Staff Recommendations"]}),e.jsx(x,{children:"Recommended actions to address staffing gaps"})]}),e.jsx(j,{children:h.length>0?e.jsx(B,{data:h,columns:k}):e.jsxs(S,{children:[e.jsx(A,{className:"h-4 w-4 text-green-600"}),e.jsx(W,{children:"All subjects have adequate staffing. No recommendations at this time."})]})})]})})]})]})},ne=()=>e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Workload Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Calculate workload, configure formulas, and generate reports"})]}),e.jsxs(a,{defaultValue:"calculator",className:"space-y-4",children:[e.jsxs(s,{className:"grid w-full grid-cols-3",children:[e.jsxs(r,{value:"calculator",children:[e.jsx(h,{className:"mr-2 h-4 w-4"}),"Calculator"]}),e.jsxs(r,{value:"formula",children:[e.jsx(F,{className:"mr-2 h-4 w-4"}),"Formula Config"]}),e.jsxs(r,{value:"reports",children:[e.jsx(R,{className:"mr-2 h-4 w-4"}),"Reports"]})]}),e.jsx(t,{value:"calculator",className:"space-y-4",children:e.jsx(le,{})}),e.jsx(t,{value:"formula",className:"space-y-4",children:e.jsx(ce,{})}),e.jsx(t,{value:"reports",className:"space-y-4",children:e.jsx(de,{})})]})]});export{ne as WorkloadModule,ne as default};
