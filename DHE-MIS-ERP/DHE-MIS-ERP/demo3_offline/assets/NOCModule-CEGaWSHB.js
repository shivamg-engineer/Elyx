import{j as e}from"./ui-vendor-8V_oKEeO.js";import{u as t,r as s}from"./react-vendor-CNUWQFbP.js";import{T as r,a as i,b as a,c as n}from"./academics-yUGFON3d.js";import{n as c,o as d,p as l,q as o,r as m,S as u,I as x,g as p,h,i as j,j as R,k as N,B as f,F as v,b as E,E as D,t as y,W as A,D as g,a8 as T,a7 as w,ab as b,aH as C,ay as O,av as _,aE as I,ac as S}from"./institute-BF3Og4ow.js";import{T as P,e as k,f as U,g as V,h as B,i as F}from"./verification-Bi_X-LS6.js";import{T as W}from"./index-BTNXxIF4.js";import{b as M,c as Z,d as J,e as L,f as q,g as Y}from"./staffing-BsaaBxTJ.js";import"./chart-vendor-DjRgKakx.js";import"./form-vendor-B1G7pw6y.js";import"./query-vendor-B0hUVdFE.js";import"./i18n-vendor-DhCRt-fY.js";var G=(e=>(e.DRAFT="draft",e.SUBMITTED="submitted",e.UNDER_REVIEW_JD="under_review_jd",e.CORRECTION_REQUIRED="correction_required",e.FORWARDED_TO_DIRECTOR="forwarded_to_director",e.UNDER_REVIEW_DIRECTOR="under_review_director",e.FORWARDED_TO_SECRETARY="forwarded_to_secretary",e.UNDER_REVIEW_SECRETARY="under_review_secretary",e.APPROVED="approved",e.REJECTED="rejected",e))(G||{}),Q=(e=>(e.NEW_RECRUITMENT="new_recruitment",e.REPLACEMENT="replacement",e.ADDITIONAL_POST="additional_post",e))(Q||{});const $=e=>{const t=["Mathematics","Physics","Chemistry","English","History","Commerce"],s=["Assistant Professor","Associate Professor","Lecturer"],r=["General","OBC","SC","ST"],i=["Male","Female"];return Array.from({length:e},(e,a)=>({id:`roster-${Date.now()}-${a}`,serialNumber:a+1,postName:s[a%s.length],subject:t[a%t.length],category:r[a%r.length],gender:i[a%i.length],disability:"None",approved:3+a%3,filled:1+a%2,vacant:2+a%2,remarks:a%3==0?"Urgent requirement":void 0}))},H=e=>Array.from({length:e},(e,t)=>({id:`doc-${Date.now()}-${t}`,fileName:`roster_document_${t+1}.pdf`,fileType:"application/pdf",fileSize:1048576*(2+t),fileUrl:`/uploads/roster_${t+1}.pdf`,uploadedAt:new Date(Date.now()-24*t*60*60*1e3).toISOString()})),z=[{id:"noc-001",applicationNumber:"NOC/2024/001",instituteId:"inst-001",instituteName:"Government College of Arts and Science",nocType:Q.NEW_RECRUITMENT,status:G.APPROVED,rosterPositions:$(5),rosterDocuments:H(2),totalVacancies:8,justification:"Due to retirement of senior faculty members and increased student enrollment, we require new recruitment to maintain quality education standards.",submittedAt:"2024-01-15T10:00:00Z",submittedBy:"Dr. Rajesh Kumar (Principal)",jdRemarks:"All documents verified. Roster is in order. Recommended for approval.",jdReviewedAt:"2024-01-18T14:30:00Z",jdReviewedBy:"Mr. Suresh Patil (JD)",directorRemarks:"Approved and forwarded to Secretary for final approval.",directorReviewedAt:"2024-01-20T11:00:00Z",directorReviewedBy:"Dr. Meena Joshi (Director)",secretaryRemarks:"NOC granted for recruitment of 8 posts as per roster.",secretaryApprovedAt:"2024-01-22T16:00:00Z",secretaryApprovedBy:"Mr. Anil Deshmukh (Secretary)",nocDocumentUrl:"/documents/noc_001.pdf",createdAt:"2024-01-15T09:00:00Z",updatedAt:"2024-01-22T16:00:00Z"},{id:"noc-002",applicationNumber:"NOC/2024/002",instituteId:"inst-002",instituteName:"Shivaji College of Commerce",nocType:Q.REPLACEMENT,status:G.UNDER_REVIEW_SECRETARY,rosterPositions:$(3),rosterDocuments:H(2),totalVacancies:3,justification:"Replacement required for faculty members who resigned. Critical positions need to be filled immediately.",submittedAt:"2024-01-20T11:30:00Z",submittedBy:"Dr. Priya Sharma (Principal)",jdRemarks:"Documents verified. Replacement justified. Forwarding to Director.",jdReviewedAt:"2024-01-23T10:00:00Z",jdReviewedBy:"Mr. Suresh Patil (JD)",directorRemarks:"Approved. Forwarding to Secretary.",directorReviewedAt:"2024-01-25T15:00:00Z",directorReviewedBy:"Dr. Meena Joshi (Director)",createdAt:"2024-01-20T10:00:00Z",updatedAt:"2024-01-25T15:00:00Z"},{id:"noc-003",applicationNumber:"NOC/2024/003",instituteId:"inst-003",instituteName:"Maharashtra Institute of Technology",nocType:Q.ADDITIONAL_POST,status:G.UNDER_REVIEW_DIRECTOR,rosterPositions:$(4),rosterDocuments:H(3),totalVacancies:6,justification:"New courses introduced. Additional faculty required to handle increased workload and maintain student-teacher ratio.",submittedAt:"2024-01-25T09:00:00Z",submittedBy:"Dr. Vikram Singh (Principal)",jdRemarks:"Workload calculation verified. Additional posts justified. Recommended.",jdReviewedAt:"2024-01-28T11:00:00Z",jdReviewedBy:"Mr. Suresh Patil (JD)",createdAt:"2024-01-25T08:00:00Z",updatedAt:"2024-01-28T11:00:00Z"},{id:"noc-004",applicationNumber:"NOC/2024/004",instituteId:"inst-004",instituteName:"Pune College of Engineering",nocType:Q.NEW_RECRUITMENT,status:G.UNDER_REVIEW_JD,rosterPositions:$(6),rosterDocuments:H(2),totalVacancies:10,justification:"Multiple vacancies due to retirements and transfers. Urgent recruitment needed for upcoming academic year.",submittedAt:"2024-02-01T10:00:00Z",submittedBy:"Dr. Sunita Mehta (Principal)",createdAt:"2024-02-01T09:00:00Z",updatedAt:"2024-02-01T10:00:00Z"},{id:"noc-005",applicationNumber:"NOC/2024/005",instituteId:"inst-005",instituteName:"Mumbai Arts College",nocType:Q.REPLACEMENT,status:G.CORRECTION_REQUIRED,rosterPositions:$(2),rosterDocuments:H(1),totalVacancies:2,justification:"Replacement for faculty on long leave.",submittedAt:"2024-02-03T14:00:00Z",submittedBy:"Dr. Neha Gupta (Principal)",jdRemarks:"Roster document is incomplete. Please upload complete roster with all signatures and submit again.",jdReviewedAt:"2024-02-05T10:00:00Z",jdReviewedBy:"Mr. Suresh Patil (JD)",createdAt:"2024-02-03T13:00:00Z",updatedAt:"2024-02-05T10:00:00Z"},{id:"noc-006",applicationNumber:"NOC/2024/006",instituteId:"inst-006",instituteName:"Nagpur Science College",nocType:Q.NEW_RECRUITMENT,status:G.SUBMITTED,rosterPositions:$(4),rosterDocuments:H(2),totalVacancies:7,justification:"Expansion of science department. New laboratories established requiring additional faculty.",submittedAt:"2024-02-08T11:00:00Z",submittedBy:"Dr. Rahul Verma (Principal)",createdAt:"2024-02-08T10:00:00Z",updatedAt:"2024-02-08T11:00:00Z"},{id:"noc-007",applicationNumber:"NOC/2024/007",instituteId:"inst-007",instituteName:"Aurangabad Commerce Institute",nocType:Q.ADDITIONAL_POST,status:G.DRAFT,rosterPositions:$(3),rosterDocuments:H(1),totalVacancies:4,justification:"New MBA program approved. Additional faculty required.",createdAt:"2024-02-10T09:00:00Z",updatedAt:"2024-02-10T09:00:00Z"},{id:"noc-008",applicationNumber:"NOC/2024/008",instituteId:"inst-001",instituteName:"Government College of Arts and Science",nocType:Q.REPLACEMENT,status:G.APPROVED,rosterPositions:$(2),rosterDocuments:H(2),totalVacancies:2,justification:"Emergency replacement for faculty on medical leave.",submittedAt:"2024-01-10T10:00:00Z",submittedBy:"Dr. Rajesh Kumar (Principal)",jdRemarks:"Emergency case. Approved expeditiously.",jdReviewedAt:"2024-01-11T14:00:00Z",jdReviewedBy:"Mr. Suresh Patil (JD)",directorRemarks:"Approved.",directorReviewedAt:"2024-01-12T10:00:00Z",directorReviewedBy:"Dr. Meena Joshi (Director)",secretaryRemarks:"NOC granted.",secretaryApprovedAt:"2024-01-13T11:00:00Z",secretaryApprovedBy:"Mr. Anil Deshmukh (Secretary)",nocDocumentUrl:"/documents/noc_008.pdf",createdAt:"2024-01-10T09:00:00Z",updatedAt:"2024-01-13T11:00:00Z"},{id:"noc-009",applicationNumber:"NOC/2024/009",instituteId:"inst-008",instituteName:"Kolhapur Engineering College",nocType:Q.NEW_RECRUITMENT,status:G.REJECTED,rosterPositions:$(5),rosterDocuments:H(2),totalVacancies:8,justification:"Recruitment for new posts.",submittedAt:"2024-01-05T10:00:00Z",submittedBy:"Dr. Amit Kulkarni (Principal)",jdRemarks:"Roster not maintained as per government guidelines. Application rejected.",jdReviewedAt:"2024-01-08T15:00:00Z",jdReviewedBy:"Mr. Suresh Patil (JD)",createdAt:"2024-01-05T09:00:00Z",updatedAt:"2024-01-08T15:00:00Z"},{id:"noc-010",applicationNumber:"NOC/2024/010",instituteId:"inst-009",instituteName:"Nashik Medical College",nocType:Q.ADDITIONAL_POST,status:G.FORWARDED_TO_DIRECTOR,rosterPositions:$(7),rosterDocuments:H(3),totalVacancies:12,justification:"Medical college expansion. New departments established requiring faculty.",submittedAt:"2024-02-05T10:00:00Z",submittedBy:"Dr. Pooja Nair (Principal)",jdRemarks:"All documents in order. Forwarding to Director for approval.",jdReviewedAt:"2024-02-07T11:00:00Z",jdReviewedBy:"Mr. Suresh Patil (JD)",createdAt:"2024-02-05T09:00:00Z",updatedAt:"2024-02-07T11:00:00Z"}],K=e=>{switch(e){case G.APPROVED:return"default";case G.REJECTED:case G.CORRECTION_REQUIRED:return"destructive";case G.DRAFT:return"secondary";default:return"outline"}},X=({userRole:r="jd",onViewDetails:i})=>{const a=t(),[n,y]=s.useState(""),[A,g]=s.useState({status:"",nocType:""}),T=s.useMemo(()=>z.filter(e=>"jd"===r?[G.SUBMITTED,G.UNDER_REVIEW_JD,G.CORRECTION_REQUIRED,G.FORWARDED_TO_DIRECTOR].includes(e.status):"director"===r?[G.FORWARDED_TO_DIRECTOR,G.UNDER_REVIEW_DIRECTOR,G.FORWARDED_TO_SECRETARY].includes(e.status):"secretary"!==r||[G.FORWARDED_TO_SECRETARY,G.UNDER_REVIEW_SECRETARY,G.APPROVED,G.REJECTED].includes(e.status)),[r]),w=s.useMemo(()=>T.filter(e=>{var t;const s=""===n||(null==(t=e.applicationNumber)?void 0:t.toLowerCase().includes(n.toLowerCase()))||e.instituteName.toLowerCase().includes(n.toLowerCase()),r=!A.status||e.status===A.status,i=!A.nocType||e.nocType===A.nocType;return s&&r&&i}),[T,n,A]);return e.jsx("div",{className:"space-y-6",children:e.jsxs(c,{children:[e.jsxs(d,{children:[e.jsx(l,{children:"NOC Applications"}),e.jsx(o,{children:"Review and process NOC applications for staff recruitment"})]}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(u,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(x,{placeholder:"Search by application number or institute name...",value:n,onChange:e=>y(e.target.value),className:"pl-10"})]}),e.jsxs(p,{value:A.status||"all",onValueChange:e=>g(t=>({...t,status:"all"===e?"":e})),children:[e.jsx(h,{className:"w-full md:w-[200px]",children:e.jsx(j,{placeholder:"Filter by Status"})}),e.jsxs(R,{children:[e.jsx(N,{value:"all",children:"All Statuses"}),"jd"===r&&e.jsxs(e.Fragment,{children:[e.jsx(N,{value:G.SUBMITTED,children:"Submitted"}),e.jsx(N,{value:G.UNDER_REVIEW_JD,children:"Under Review"}),e.jsx(N,{value:G.CORRECTION_REQUIRED,children:"Correction Required"})]}),"director"===r&&e.jsxs(e.Fragment,{children:[e.jsx(N,{value:G.FORWARDED_TO_DIRECTOR,children:"Forwarded"}),e.jsx(N,{value:G.UNDER_REVIEW_DIRECTOR,children:"Under Review"})]}),"secretary"===r&&e.jsxs(e.Fragment,{children:[e.jsx(N,{value:G.FORWARDED_TO_SECRETARY,children:"Forwarded"}),e.jsx(N,{value:G.UNDER_REVIEW_SECRETARY,children:"Under Review"}),e.jsx(N,{value:G.APPROVED,children:"Approved"}),e.jsx(N,{value:G.REJECTED,children:"Rejected"})]})]})]}),e.jsxs(p,{value:A.nocType||"all",onValueChange:e=>g(t=>({...t,nocType:"all"===e?"":e})),children:[e.jsx(h,{className:"w-full md:w-[200px]",children:e.jsx(j,{placeholder:"Filter by Type"})}),e.jsxs(R,{children:[e.jsx(N,{value:"all",children:"All Types"}),e.jsx(N,{value:Q.NEW_RECRUITMENT,children:"New Recruitment"}),e.jsx(N,{value:Q.REPLACEMENT,children:"Replacement"}),e.jsx(N,{value:Q.ADDITIONAL_POST,children:"Additional Post"})]})]}),(n||A.status||A.nocType)&&e.jsxs(f,{variant:"outline",onClick:()=>{y(""),g({status:"",nocType:""})},children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Reset"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Applications"}),e.jsx("div",{className:"text-2xl font-bold",children:w.length})]}),e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-sm text-blue-600",children:"Pending Review"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:w.filter(e=>e.status.includes("UNDER_REVIEW")||e.status===G.SUBMITTED).length})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-sm text-green-600",children:"Approved"}),e.jsx("div",{className:"text-2xl font-bold text-green-600",children:w.filter(e=>e.status===G.APPROVED).length})]}),e.jsxs("div",{className:"p-4 bg-orange-50 rounded-lg",children:[e.jsx("div",{className:"text-sm text-orange-600",children:"Total Vacancies"}),e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:w.reduce((e,t)=>e+t.totalVacancies,0)})]})]}),e.jsx("div",{className:"border rounded-lg",children:e.jsxs(P,{children:[e.jsx(k,{children:e.jsxs(U,{children:[e.jsx(V,{children:"Application No."}),e.jsx(V,{children:"Institute Name"}),e.jsx(V,{children:"Type"}),e.jsx(V,{children:"Vacancies"}),e.jsx(V,{children:"Submitted Date"}),e.jsx(V,{children:"Status"}),e.jsx(V,{className:"text-right",children:"Actions"})]})}),e.jsx(B,{children:0===w.length?e.jsx(U,{children:e.jsx(F,{colSpan:7,className:"text-center text-muted-foreground py-8",children:"No applications found"})}):w.map(t=>{return e.jsxs(U,{children:[e.jsx(F,{className:"font-medium",children:t.applicationNumber}),e.jsx(F,{children:t.instituteName}),e.jsx(F,{children:(r=t.nocType,{[Q.NEW_RECRUITMENT]:"New Recruitment",[Q.REPLACEMENT]:"Replacement",[Q.ADDITIONAL_POST]:"Additional Post"}[r])}),e.jsx(F,{children:t.totalVacancies}),e.jsx(F,{children:t.submittedAt?new Date(t.submittedAt).toLocaleDateString():"-"}),e.jsx(F,{children:e.jsx(E,{variant:K(t.status),children:(s=t.status,{[G.DRAFT]:"Draft",[G.SUBMITTED]:"Submitted",[G.UNDER_REVIEW_JD]:"Under Review (JD)",[G.CORRECTION_REQUIRED]:"Correction Required",[G.FORWARDED_TO_DIRECTOR]:"Forwarded to Director",[G.UNDER_REVIEW_DIRECTOR]:"Under Review (Director)",[G.FORWARDED_TO_SECRETARY]:"Forwarded to Secretary",[G.UNDER_REVIEW_SECRETARY]:"Under Review (Secretary)",[G.APPROVED]:"Approved",[G.REJECTED]:"Rejected"}[s])})}),e.jsx(F,{className:"text-right",children:e.jsxs(f,{variant:"ghost",size:"sm",onClick:()=>{return e=t.id,void(i?i(e):a(`/noc/applications/${e}`));var e},children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"View"]})})]},t.id);var s,r})})]})})]})]})})},ee=e=>{switch(e){case G.APPROVED:return"default";case G.REJECTED:case G.CORRECTION_REQUIRED:return"destructive";case G.DRAFT:return"secondary";default:return"outline"}},te=({application:t,userRole:r,onAction:i})=>{const[a,n]=s.useState(!1),[u,p]=s.useState("forward"),[h,j]=s.useState(""),[R,N]=s.useState(""),{success:v,error:D}=_(),I=e=>{p(e),j(""),N(""),n(!0)},S=e=>{v(`Downloading ${e}...`)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(c,{children:[e.jsx(d,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(l,{children:"NOC Application Details"}),e.jsxs(o,{children:["Application No: ",t.applicationNumber]})]}),e.jsx(E,{variant:ee(t.status),children:(Q=t.status,{[G.DRAFT]:"Draft",[G.SUBMITTED]:"Submitted",[G.UNDER_REVIEW_JD]:"Under Review (JD)",[G.CORRECTION_REQUIRED]:"Correction Required",[G.FORWARDED_TO_DIRECTOR]:"Forwarded to Director",[G.UNDER_REVIEW_DIRECTOR]:"Under Review (Director)",[G.FORWARDED_TO_SECRETARY]:"Forwarded to Secretary",[G.UNDER_REVIEW_SECRETARY]:"Under Review (Secretary)",[G.APPROVED]:"Approved",[G.REJECTED]:"Rejected"}[Q])})]})}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(y,{className:"text-muted-foreground",children:"Institute Name"}),e.jsx("p",{className:"font-medium",children:t.instituteName})]}),e.jsxs("div",{children:[e.jsx(y,{className:"text-muted-foreground",children:"NOC Type"}),e.jsx("p",{className:"font-medium",children:t.nocType.replace(/_/g," ").toUpperCase()})]}),e.jsxs("div",{children:[e.jsx(y,{className:"text-muted-foreground",children:"Total Vacancies"}),e.jsx("p",{className:"font-medium text-2xl text-primary",children:t.totalVacancies})]}),e.jsxs("div",{children:[e.jsx(y,{className:"text-muted-foreground",children:"Submitted Date"}),e.jsx("p",{className:"font-medium",children:t.submittedAt?new Date(t.submittedAt).toLocaleDateString():"-"})]})]}),t.justification&&e.jsxs("div",{children:[e.jsx(y,{className:"text-muted-foreground",children:"Justification"}),e.jsx("p",{className:"mt-1 text-sm",children:t.justification})]})]})]}),e.jsxs(c,{children:[e.jsxs(d,{children:[e.jsx(l,{children:"Roster Details"}),e.jsx(o,{children:"Subject/Post-wise vacancy details"})]}),e.jsx(m,{children:e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs(P,{children:[e.jsx(k,{children:e.jsxs(U,{children:[e.jsx(V,{children:"S.No"}),e.jsx(V,{children:"Post Name"}),e.jsx(V,{children:"Subject"}),e.jsx(V,{children:"Category"}),e.jsx(V,{children:"Gender"}),e.jsx(V,{className:"text-right",children:"Approved"}),e.jsx(V,{className:"text-right",children:"Filled"}),e.jsx(V,{className:"text-right",children:"Vacant"}),e.jsx(V,{children:"Remarks"})]})}),e.jsx(B,{children:t.rosterPositions.map(t=>e.jsxs(U,{children:[e.jsx(F,{children:t.serialNumber}),e.jsx(F,{children:t.postName}),e.jsx(F,{children:t.subject}),e.jsx(F,{children:t.category}),e.jsx(F,{children:t.gender}),e.jsx(F,{className:"text-right",children:t.approved}),e.jsx(F,{className:"text-right",children:t.filled}),e.jsx(F,{className:"text-right font-medium text-orange-600",children:t.vacant}),e.jsx(F,{className:"text-sm text-muted-foreground",children:t.remarks||"-"})]},t.id))})]})})})]}),e.jsxs(c,{children:[e.jsxs(d,{children:[e.jsx(l,{children:"Roster Documents"}),e.jsx(o,{children:"Uploaded roster documents"})]}),e.jsx(m,{children:e.jsx("div",{className:"space-y-2",children:t.rosterDocuments.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-muted/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(A,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.fileName}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[(t.fileSize/1048576).toFixed(2)," MB • Uploaded on"," ",new Date(t.uploadedAt).toLocaleDateString()]})]})]}),e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>S(t.fileName),children:e.jsx(g,{className:"h-4 w-4"})})]},t.id))})})]}),e.jsxs(c,{children:[e.jsxs(d,{children:[e.jsx(l,{children:"Review Timeline"}),e.jsx(o,{children:"Application review history"})]}),e.jsx(m,{children:e.jsxs("div",{className:"space-y-4",children:[t.submittedAt&&e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(T,{className:"h-4 w-4 text-blue-600"})}),e.jsx("div",{className:"w-px h-full bg-border mt-2"})]}),e.jsxs("div",{className:"flex-1 pb-4",children:[e.jsx("p",{className:"font-medium",children:"Application Submitted"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(t.submittedAt).toLocaleString()}),e.jsxs("p",{className:"text-sm",children:["By: ",t.submittedBy]})]})]}),t.jdReviewedAt&&e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx(w,{className:"h-4 w-4 text-green-600"})}),(t.directorReviewedAt||t.secretaryApprovedAt)&&e.jsx("div",{className:"w-px h-full bg-border mt-2"})]}),e.jsxs("div",{className:"flex-1 pb-4",children:[e.jsx("p",{className:"font-medium",children:"JD Office Review"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(t.jdReviewedAt).toLocaleString()}),e.jsxs("p",{className:"text-sm",children:["By: ",t.jdReviewedBy]}),t.jdRemarks&&e.jsxs("p",{className:"text-sm mt-2 p-2 bg-muted rounded",children:[e.jsx("span",{className:"font-medium",children:"Remarks:"})," ",t.jdRemarks]})]})]}),t.directorReviewedAt&&e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx(w,{className:"h-4 w-4 text-green-600"})}),t.secretaryApprovedAt&&e.jsx("div",{className:"w-px h-full bg-border mt-2"})]}),e.jsxs("div",{className:"flex-1 pb-4",children:[e.jsx("p",{className:"font-medium",children:"Director Review"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(t.directorReviewedAt).toLocaleString()}),e.jsxs("p",{className:"text-sm",children:["By: ",t.directorReviewedBy]}),t.directorRemarks&&e.jsxs("p",{className:"text-sm mt-2 p-2 bg-muted rounded",children:[e.jsx("span",{className:"font-medium",children:"Remarks:"})," ",t.directorRemarks]})]})]}),t.secretaryApprovedAt&&e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex flex-col items-center",children:e.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx(w,{className:"h-4 w-4 text-green-600"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:"Secretary Approval"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(t.secretaryApprovedAt).toLocaleString()}),e.jsxs("p",{className:"text-sm",children:["By: ",t.secretaryApprovedBy]}),t.secretaryRemarks&&e.jsxs("p",{className:"text-sm mt-2 p-2 bg-muted rounded",children:[e.jsx("span",{className:"font-medium",children:"Remarks:"})," ",t.secretaryRemarks]})]})]})]})})]}),t.status===G.APPROVED&&t.nocDocumentUrl&&e.jsxs(c,{children:[e.jsxs(d,{children:[e.jsx(l,{children:"NOC Document"}),e.jsx(o,{children:"Official No Objection Certificate"})]}),e.jsx(m,{children:e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-green-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(A,{className:"h-6 w-6 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-900",children:"NOC Certificate"}),e.jsxs("p",{className:"text-sm text-green-700",children:["Approved on ",new Date(t.secretaryApprovedAt).toLocaleDateString()]})]})]}),e.jsxs(f,{onClick:()=>S("NOC_Certificate.pdf"),children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),"Download"]})]})})]}),("jd"===r?[G.SUBMITTED,G.UNDER_REVIEW_JD].includes(t.status):"director"===r?[G.FORWARDED_TO_DIRECTOR,G.UNDER_REVIEW_DIRECTOR].includes(t.status):"secretary"===r&&[G.FORWARDED_TO_SECRETARY,G.UNDER_REVIEW_SECRETARY].includes(t.status))&&e.jsxs(c,{children:[e.jsxs(d,{children:[e.jsx(l,{children:"Review Actions"}),e.jsx(o,{children:"Take action on this application"})]}),e.jsx(m,{children:e.jsxs("div",{className:"flex flex-wrap gap-3",children:["jd"===r&&e.jsxs(e.Fragment,{children:[e.jsxs(f,{variant:"outline",onClick:()=>I("request_correction"),children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"Request Correction"]}),e.jsxs(f,{onClick:()=>I("forward"),children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),"Forward to Director"]}),e.jsxs(f,{variant:"destructive",onClick:()=>I("reject"),children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),"Reject"]})]}),"director"===r&&e.jsxs(e.Fragment,{children:[e.jsxs(f,{onClick:()=>I("forward"),children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),"Forward to Secretary"]}),e.jsxs(f,{variant:"destructive",onClick:()=>I("reject"),children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),"Reject"]})]}),"secretary"===r&&e.jsxs(e.Fragment,{children:[e.jsxs(f,{onClick:()=>I("approve"),children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Approve & Generate NOC"]}),e.jsxs(f,{variant:"destructive",onClick:()=>I("reject"),children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),"Reject"]})]})]})})]}),e.jsx(M,{open:a,onOpenChange:n,children:e.jsxs(Z,{children:[e.jsxs(J,{children:[e.jsxs(L,{children:["approve"===u&&"Approve Application","reject"===u&&"Reject Application","request_correction"===u&&"Request Correction","forward"===u&&"Forward Application"]}),e.jsxs(q,{children:["approve"===u&&"This will generate the official NOC document.","reject"===u&&"This will reject the application permanently.","request_correction"===u&&"The institute will be notified to make corrections.","forward"===u&&"Forward this application to the next level for review."]})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"remarks",children:"Remarks *"}),e.jsx(W,{id:"remarks",placeholder:"Enter your remarks...",value:h,onChange:e=>j(e.target.value),rows:4})]}),("approve"===u||"reject"===u)&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"otp",children:"OTP Verification *"}),e.jsx(x,{id:"otp",type:"text",placeholder:"Enter 6-digit OTP",value:R,onChange:e=>N(e.target.value),maxLength:6}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"OTP has been sent to your registered mobile number"})]})]}),e.jsxs(Y,{children:[e.jsx(f,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsx(f,{onClick:()=>{if(!h.trim())return void D("Please provide remarks");if(("approve"===u||"reject"===u)&&!R)return void D("Please enter OTP for verification");const e={applicationId:t.id,action:u,remarks:h,otp:R||void 0};null==i||i(e),n(!1);v({approve:"Application approved successfully",reject:"Application rejected",request_correction:"Correction request sent to institute",forward:"Application forwarded successfully"}[u])},children:"Confirm"})]})]})})]});var Q},se=({application:t,onDownload:s,onPrint:r})=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-end gap-2 print:hidden",children:[e.jsxs(f,{variant:"outline",onClick:()=>{r?r():window.print()},children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Print"]}),e.jsxs(f,{onClick:()=>{s?s():window.print()},children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),"Download PDF"]})]}),e.jsx(c,{className:"max-w-4xl mx-auto",children:e.jsxs(m,{className:"p-12 space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-2xl font-bold text-primary",children:"DHE"})})}),e.jsx("h1",{className:"text-2xl font-bold",children:"Department of Higher Education"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Government of Maharashtra"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Mantralaya, Mumbai - 400032"})]}),e.jsx(S,{}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h3",{className:"text-xl font-bold underline",children:"NO OBJECTION CERTIFICATE"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"For Staff Recruitment"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"NOC No:"})," ",t.applicationNumber]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"font-semibold",children:"Date:"})," ",t.secretaryApprovedAt?new Date(t.secretaryApprovedAt).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"}):(new Date).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"})]})]}),e.jsx(S,{}),e.jsxs("div",{className:"space-y-4 text-sm leading-relaxed",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"To,"}),e.jsx("br",{}),"The Principal,",e.jsx("br",{}),t.instituteName]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Subject:"})," No Objection Certificate for Staff Recruitment"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Reference:"})," Your application no. ",t.applicationNumber," ","dated"," ",t.submittedAt?new Date(t.submittedAt).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"}):"-"]}),e.jsx("p",{className:"text-justify",children:"With reference to your application for No Objection Certificate for recruitment of teaching staff, the Department of Higher Education, Government of Maharashtra, hereby grants permission to recruit staff for the following vacant positions as per the roster maintained by your institution."}),e.jsxs("div",{className:"my-6",children:[e.jsx("p",{className:"font-semibold mb-3",children:"Approved Vacancies:"}),e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-muted",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 text-left border-r",children:"S.No"}),e.jsx("th",{className:"p-2 text-left border-r",children:"Post Name"}),e.jsx("th",{className:"p-2 text-left border-r",children:"Subject"}),e.jsx("th",{className:"p-2 text-left border-r",children:"Category"}),e.jsx("th",{className:"p-2 text-center",children:"Vacancies"})]})}),e.jsxs("tbody",{children:[t.rosterPositions.map((t,s)=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-2 border-r",children:s+1}),e.jsx("td",{className:"p-2 border-r",children:t.postName}),e.jsx("td",{className:"p-2 border-r",children:t.subject}),e.jsx("td",{className:"p-2 border-r",children:t.category}),e.jsx("td",{className:"p-2 text-center font-semibold",children:t.vacant})]},t.id)),e.jsxs("tr",{className:"border-t bg-muted font-semibold",children:[e.jsx("td",{colSpan:4,className:"p-2 text-right",children:"Total Vacancies:"}),e.jsx("td",{className:"p-2 text-center",children:t.totalVacancies})]})]})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"font-semibold",children:"Terms and Conditions:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 ml-4",children:[e.jsx("li",{children:"The recruitment shall be carried out strictly as per the roster maintained by the institution and in accordance with Government of Maharashtra rules and regulations."}),e.jsx("li",{children:"The institution shall ensure compliance with reservation policies for SC, ST, OBC, and other categories as per government norms."}),e.jsx("li",{children:"All appointments shall be made through proper advertisement and selection process as per UGC guidelines and state government regulations."}),e.jsx("li",{children:"The institution shall submit a compliance report within 90 days of completion of the recruitment process."}),e.jsx("li",{children:"This NOC is valid for a period of one year from the date of issue and may be extended on request with valid justification."}),e.jsx("li",{children:"Any deviation from the approved roster or recruitment norms may result in cancellation of this NOC and appropriate action as per rules."})]})]}),e.jsx("p",{className:"text-justify",children:"The institution is advised to complete the recruitment process at the earliest and submit the compliance report to this office."})]}),e.jsx(S,{}),e.jsxs("div",{className:"space-y-4 text-sm",children:[t.jdRemarks&&e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"JD Office Remarks:"}),e.jsx("p",{className:"text-muted-foreground",children:t.jdRemarks}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Reviewed by: ",t.jdReviewedBy," on"," ",t.jdReviewedAt?new Date(t.jdReviewedAt).toLocaleDateString("en-IN"):"-"]})]}),t.directorRemarks&&e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Director Remarks:"}),e.jsx("p",{className:"text-muted-foreground",children:t.directorRemarks}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Reviewed by: ",t.directorReviewedBy," on"," ",t.directorReviewedAt?new Date(t.directorReviewedAt).toLocaleDateString("en-IN"):"-"]})]}),t.secretaryRemarks&&e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Secretary Remarks:"}),e.jsx("p",{className:"text-muted-foreground",children:t.secretaryRemarks}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Approved by: ",t.secretaryApprovedBy," on"," ",t.secretaryApprovedAt?new Date(t.secretaryApprovedAt).toLocaleDateString("en-IN"):"-"]})]})]}),e.jsx(S,{}),e.jsxs("div",{className:"flex justify-between items-end pt-8",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-semibold",children:"Issued by:"}),e.jsx("p",{children:"Department of Higher Education"}),e.jsx("p",{children:"Government of Maharashtra"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mb-16"}),e.jsxs("div",{className:"border-t border-black pt-2",children:[e.jsx("p",{className:"font-semibold",children:t.secretaryApprovedBy||"Secretary"}),e.jsx("p",{className:"text-xs",children:"Department of Higher Education"}),e.jsx("p",{className:"text-xs",children:"Government of Maharashtra"})]})]})]}),e.jsxs("div",{className:"text-center text-xs text-muted-foreground pt-8 border-t",children:[e.jsx("p",{children:"This is a computer-generated document and does not require a physical signature."}),e.jsxs("p",{children:["Document ID: ",t.id," | Generated on:"," ",(new Date).toLocaleString("en-IN")]})]})]})}),e.jsx("style",{children:"\n        @media print {\n          body * {\n            visibility: hidden;\n          }\n          .print\\:hidden {\n            display: none !important;\n          }\n          .max-w-4xl {\n            max-width: 100% !important;\n          }\n        }\n      "})]}),re=async e=>{try{const t=await(async e=>{try{const t=z.find(t=>t.id===e);if(!t)throw new Error("NOC application not found");return t}catch(t){throw t}})(e.applicationId),s=(new Date).toISOString(),r="Current User";let i={...t};const a=[G.SUBMITTED,G.UNDER_REVIEW_JD].includes(t.status),n=[G.FORWARDED_TO_DIRECTOR,G.UNDER_REVIEW_DIRECTOR].includes(t.status),c=[G.FORWARDED_TO_SECRETARY,G.UNDER_REVIEW_SECRETARY].includes(t.status);switch(e.action){case"approve":c&&(i={...i,status:G.APPROVED,secretaryRemarks:e.remarks,secretaryApprovedAt:s,secretaryApprovedBy:r,nocDocumentUrl:`/documents/noc_${t.id}.pdf`,updatedAt:s});break;case"reject":a?i={...i,status:G.REJECTED,jdRemarks:e.remarks,jdReviewedAt:s,jdReviewedBy:r,updatedAt:s}:n?i={...i,status:G.REJECTED,directorRemarks:e.remarks,directorReviewedAt:s,directorReviewedBy:r,updatedAt:s}:c&&(i={...i,status:G.REJECTED,secretaryRemarks:e.remarks,secretaryApprovedAt:s,secretaryApprovedBy:r,updatedAt:s});break;case"request_correction":a&&(i={...i,status:G.CORRECTION_REQUIRED,jdRemarks:e.remarks,jdReviewedAt:s,jdReviewedBy:r,updatedAt:s});break;case"forward":a?i={...i,status:G.FORWARDED_TO_DIRECTOR,jdRemarks:e.remarks,jdReviewedAt:s,jdReviewedBy:r,updatedAt:s}:n&&(i={...i,status:G.FORWARDED_TO_SECRETARY,directorRemarks:e.remarks,directorReviewedAt:s,directorReviewedBy:r,updatedAt:s})}return i}catch(t){throw t}},ie=()=>{const[t,c]=s.useState(null),[d,l]=s.useState("jd"),{success:o,error:m}=_(),u=t?z.find(e=>e.id===t):null,x=async e=>{try{await re(e);o("Action completed successfully"),setTimeout(()=>{c(null)},1500)}catch(t){m("Failed to process action")}};return e.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"NOC Review & Approval"}),e.jsx("p",{className:"text-muted-foreground",children:"Review and process NOC applications for staff recruitment"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>l("jd"),className:"px-4 py-2 rounded "+("jd"===d?"bg-primary text-white":"bg-muted"),children:"JD Office"}),e.jsx("button",{onClick:()=>l("director"),className:"px-4 py-2 rounded "+("director"===d?"bg-primary text-white":"bg-muted"),children:"Director"}),e.jsx("button",{onClick:()=>l("secretary"),className:"px-4 py-2 rounded "+("secretary"===d?"bg-primary text-white":"bg-muted"),children:"Secretary"})]})]}),t?u?e.jsxs("div",{className:"space-y-4",children:[e.jsx("button",{onClick:()=>c(null),className:"text-sm text-muted-foreground hover:text-primary",children:"← Back to Applications"}),u.status===G.APPROVED?e.jsxs(r,{defaultValue:"details",children:[e.jsxs(i,{children:[e.jsx(a,{value:"details",children:"Application Details"}),e.jsx(a,{value:"document",children:"NOC Document"})]}),e.jsx(n,{value:"details",children:e.jsx(te,{application:u,userRole:d,onAction:x})}),e.jsx(n,{value:"document",children:e.jsx(se,{application:u})})]}):e.jsx(te,{application:u,userRole:d,onAction:x})]}):e.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"Application not found"}):e.jsx(X,{userRole:d,onViewDetails:e=>{c(e)}})]})},ae=()=>e.jsx("div",{className:"p-6",children:e.jsx(ie,{})});export{ae as NOCModule,ae as default};
